import{h as g,i as S,o as k,s as q,G as I,a as h,b as O,f as p}from"./Firebase.d2f3a7d0.js";/*!
 * paypal-js v5.1.6 (2023-03-27T20:51:02.623Z)
 * Copyright 2020-present, PayPal, Inc. All rights reserved.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function V(e,t){var n=document.querySelector('script[src="'.concat(e,'"]'));if(n===null)return null;var r=b(e,t),i=n.cloneNode();if(delete i.dataset.uidAuto,Object.keys(i.dataset).length!==Object.keys(r.dataset).length)return null;var a=!0;return Object.keys(i.dataset).forEach(function(s){i.dataset[s]!==r.dataset[s]&&(a=!1)}),a?n:null}function x(e){var t=e.url,n=e.attributes,r=e.onSuccess,i=e.onError,a=b(t,n);a.onerror=i,a.onload=r,document.head.insertBefore(a,document.head.firstElementChild)}function M(e){var t="https://www.paypal.com/sdk/js";e.sdkBaseURL&&(t=e.sdkBaseURL,delete e.sdkBaseURL),L(e);var n=Object.keys(e).filter(function(a){return typeof e[a]<"u"&&e[a]!==null&&e[a]!==""}).reduce(function(a,s){var c=e[s].toString();return s.substring(0,5)==="data-"?a.dataAttributes[s]=c:a.queryParams[s]=c,a},{queryParams:{},dataAttributes:{}}),r=n.queryParams,i=n.dataAttributes;return{url:"".concat(t,"?").concat(T(r)),dataAttributes:i}}function T(e){var t="";return Object.keys(e).forEach(function(n){t.length!==0&&(t+="&"),t+=n+"="+e[n]}),t}function B(e){var t=e.split("/* Original Error:")[1];return t?t.replace(/\n/g,"").replace("*/","").trim():e}function b(e,t){t===void 0&&(t={});var n=document.createElement("script");return n.src=e,Object.keys(t).forEach(function(r){n.setAttribute(r,t[r]),r==="data-csp-nonce"&&n.setAttribute("nonce",t["data-csp-nonce"])}),n}function L(e){var t=e["merchant-id"],n=e["data-merchant-id"],r="",i="";return Array.isArray(t)?t.length>1?(r="*",i=t.toString()):r=t.toString():typeof t=="string"&&t.length>0?r=t:typeof n=="string"&&n.length>0&&(r="*",i=n),e["merchant-id"]=r,e["data-merchant-id"]=i,e}function j(e,t){if(t===void 0&&(t=A()),P(e,t),typeof document>"u")return t.resolve(null);var n=M(e),r=n.url,i=n.dataAttributes,a=i["data-namespace"]||"paypal",s=v(a);return V(r,i)&&s?t.resolve(s):U({url:r,attributes:i},t).then(function(){var c=v(a);if(c)return c;throw new Error("The window.".concat(a," global variable is not available."))})}function U(e,t){t===void 0&&(t=A()),P(e,t);var n=e.url,r=e.attributes;if(typeof n!="string"||n.length===0)throw new Error("Invalid url.");if(typeof r<"u"&&typeof r!="object")throw new Error("Expected attributes to be an object.");return new t(function(i,a){if(typeof document>"u")return i();x({url:n,attributes:r,onSuccess:function(){return i()},onError:function(){var s=new Error('The script "'.concat(n,'" failed to load.'));return window.fetch?fetch(n).then(function(c){return c.status===200&&a(s),c.text()}).then(function(c){var l=B(c);a(new Error(l))}).catch(function(c){a(c)}):a(s)}})})}function A(){if(typeof Promise>"u")throw new Error("Promise is undefined. To resolve the issue, use a Promise polyfill.");return Promise}function v(e){return window[e]}function P(e,t){if(typeof e!="object"||e===null)throw new Error("Expected an options object.");if(typeof t<"u"&&typeof t!="function")throw new Error("Expected PromisePonyfill to be a function.")}const D={isSandbox:!0};function E(){return D.isSandbox}async function N(){const e=await j({"client-id":"AUppZUwsxJGxzQZNQux6hKOOvkWU5a0wtAHSjN5-PdlDOFwjCHOMuG7IU3NWGyMzJEi-NVgQizMv5JN8",currency:"USD"});if(e===null)throw new Error("paypal = null");return e}const w="marek.krzeminski@gmail.com",o={loginAndPurchaseEl:void 0},C=g(p(),"getPurchasedVideosAsync"),$=g(p(),"getVmkPriceAsync"),H=g(p(),"purchaseVmkAsync"),W=g(p(),"handleOrderAsync");function G(){S(),o.loginAndPurchaseEl=f({query:"#loginAndPurchase"}),k(h(),async n=>{const r=n!==null,i=await R();d({root:o.loginAndPurchaseEl,query:"#loading",isVisible:!1}),d({root:o.loginAndPurchaseEl,query:"#loading2",isVisible:!1}),d({root:o.loginAndPurchaseEl,query:"button.signIn",isVisible:!r}),d({root:o.loginAndPurchaseEl,query:"button.signOut",isVisible:r}),d({root:o.loginAndPurchaseEl,query:"img.signIn",isVisible:!r}),d({root:o.loginAndPurchaseEl,query:"p.thanks",isVisible:r&&i});const a=r&&!i;if(d({root:o.loginAndPurchaseEl,query:"#loadingPayPal",isVisible:a}),d({root:o.loginAndPurchaseEl,query:"div.purchase",isVisible:a}),a)try{const s=await N(),c=o.loginAndPurchaseEl.dataset.vmkSection;if(c===void 0)throw new Error("vmkSection = undefined");const l=await $({vmkSection:c});if(l.data.price){const u=f({root:o.loginAndPurchaseEl,query:"div.price .normal"});if(u.innerHTML=`$${l.data.price.toFixed(2)}`,l.data.salePrice&&l.data.salePrice>0&&l.data.salePrice<l.data.price){u.classList.add("onSale");const y=f({root:o.loginAndPurchaseEl,query:"div.price .sale"});y.innerHTML=`$${l.data.salePrice.toFixed(2)}`,y.style.display="inline"}}const m=s.Buttons&&s.Buttons({onInit:()=>{d({root:o.loginAndPurchaseEl,query:"#loadingPayPal",isVisible:!1})},createOrder:async()=>{const u=await H({isSandbox:E(),vmkSection:c});return(u===void 0||u.data===void 0)&&alert(`Error creating order.  Please contact ${w} for help`),u.data.id},onApprove:async(u,y)=>{(await W({isSandbox:E(),orderId:u.orderID,vmkSection:c})).data.isPurchased&&setTimeout(()=>window.location.reload(),2e3)},onError:u=>{alert(`Error processing order. Try again, or please contact ${w} for help`),console.error(u)}});if(m===void 0)throw new Error("paypal.Buttons is undefined?");m.render("#payPalButton")}catch(s){console.error("failed to load the PayPal JS SDK script",s)}z(r&&i)}),f({root:o.loginAndPurchaseEl,query:"button.signIn"}).addEventListener("click",()=>q(h(),new I)),f({root:o.loginAndPurchaseEl,query:"button.signOut"}).addEventListener("click",()=>O(h())),window.unlockVideo=J}function f(e){const{root:t,query:n}=e,r=(t??document).querySelector(n);if(!(r instanceof HTMLElement))throw new TypeError(`Cannot find ${n}`);return r}async function R(){const e=o.loginAndPurchaseEl.dataset.vmkSection;if(e===void 0||h().currentUser===null)return!1;try{const t=await C({vmkSection:e}),n=t.data.vmk!==void 0&&Object.keys(t.data.vmk).length>0;return n&&(o.vmk=t.data.vmk),n}catch(t){return console.error(t),!1}}function d(e){const{root:t,query:n,isVisible:r}=e,i=f({root:t,query:n});if(i===void 0)return;const a=n.startsWith("button")||i.classList.contains("purchase")?"flex":"block";i.style.display=r?a:"none"}function z(e){const t=document.querySelectorAll("div.card img.locked");for(const n of t)n instanceof HTMLImageElement&&(n.src=`/images/marekKnows/${e?"watch":"locked"}.png`)}function J(e){if(h().currentUser===null||o.vmk===void 0||o.vmk[e]===void 0){o.loginAndPurchaseEl.scrollIntoView({behavior:"smooth"});return}window.playYouTubeVideo(o.vmk[e])}const Q=document.querySelectorAll("div.card img.locked");Q.length>0&&G();
