import{h as g,g as f,o as S,s as k,G as q,a as h,b as I,f as m,c as d}from"./Firebase.3700c243.js";const y="marek.krzeminski@gmail.com";/*!
 * paypal-js v5.1.6 (2023-03-27T20:51:02.623Z)
 * Copyright 2020-present, PayPal, Inc. All rights reserved.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function V(e,t){var r=document.querySelector('script[src="'.concat(e,'"]'));if(r===null)return null;var n=b(e,t),i=r.cloneNode();if(delete i.dataset.uidAuto,Object.keys(i.dataset).length!==Object.keys(n.dataset).length)return null;var a=!0;return Object.keys(i.dataset).forEach(function(s){i.dataset[s]!==n.dataset[s]&&(a=!1)}),a?r:null}function O(e){var t=e.url,r=e.attributes,n=e.onSuccess,i=e.onError,a=b(t,r);a.onerror=i,a.onload=n,document.head.insertBefore(a,document.head.firstElementChild)}function x(e){var t="https://www.paypal.com/sdk/js";e.sdkBaseURL&&(t=e.sdkBaseURL,delete e.sdkBaseURL),D(e);var r=Object.keys(e).filter(function(a){return typeof e[a]<"u"&&e[a]!==null&&e[a]!==""}).reduce(function(a,s){var c=e[s].toString();return s.substring(0,5)==="data-"?a.dataAttributes[s]=c:a.queryParams[s]=c,a},{queryParams:{},dataAttributes:{}}),n=r.queryParams,i=r.dataAttributes;return{url:"".concat(t,"?").concat(B(n)),dataAttributes:i}}function B(e){var t="";return Object.keys(e).forEach(function(r){t.length!==0&&(t+="&"),t+=r+"="+e[r]}),t}function T(e){var t=e.split("/* Original Error:")[1];return t?t.replace(/\n/g,"").replace("*/","").trim():e}function b(e,t){t===void 0&&(t={});var r=document.createElement("script");return r.src=e,Object.keys(t).forEach(function(n){r.setAttribute(n,t[n]),n==="data-csp-nonce"&&r.setAttribute("nonce",t["data-csp-nonce"])}),r}function D(e){var t=e["merchant-id"],r=e["data-merchant-id"],n="",i="";return Array.isArray(t)?t.length>1?(n="*",i=t.toString()):n=t.toString():typeof t=="string"&&t.length>0?n=t:typeof r=="string"&&r.length>0&&(n="*",i=r),e["merchant-id"]=n,e["data-merchant-id"]=i,e}function L(e,t){if(t===void 0&&(t=A()),P(e,t),typeof document>"u")return t.resolve(null);var r=x(e),n=r.url,i=r.dataAttributes,a=i["data-namespace"]||"paypal",s=E(a);return V(n,i)&&s?t.resolve(s):M({url:n,attributes:i},t).then(function(){var c=E(a);if(c)return c;throw new Error("The window.".concat(a," global variable is not available."))})}function M(e,t){t===void 0&&(t=A()),P(e,t);var r=e.url,n=e.attributes;if(typeof r!="string"||r.length===0)throw new Error("Invalid url.");if(typeof n<"u"&&typeof n!="object")throw new Error("Expected attributes to be an object.");return new t(function(i,a){if(typeof document>"u")return i();O({url:r,attributes:n,onSuccess:function(){return i()},onError:function(){var s=new Error('The script "'.concat(r,'" failed to load.'));return window.fetch?fetch(r).then(function(c){return c.status===200&&a(s),c.text()}).then(function(c){var l=T(c);a(new Error(l))}).catch(function(c){a(c)}):a(s)}})})}function A(){if(typeof Promise>"u")throw new Error("Promise is undefined. To resolve the issue, use a Promise polyfill.");return Promise}function E(e){return window[e]}function P(e,t){if(typeof e!="object"||e===null)throw new Error("Expected an options object.");if(typeof t<"u"&&typeof t!="function")throw new Error("Expected PromisePonyfill to be a function.")}const j={isSandbox:!1};function w(){return j.isSandbox}async function U(){const e=await L({"client-id":"ASBD3p3NO5SqJQR4hTYlWJkFnL1bD9Rv6t5FKu1aWUt9MOrICTGn8WwsdTm39F8JgBJERpW_fDglPrjx",currency:"USD"});if(e===null)throw new Error("paypal = null");return e}const o={loginAndPurchaseEl:void 0},C=g(m(),"getPurchasedVideosAsync"),R=g(m(),"getVmkPriceAsync"),W=g(m(),"purchaseVmkAsync"),$=g(m(),"handleOrderAsync");function N(){o.loginAndPurchaseEl=f({query:"#loginAndPurchase"}),S(h(),async r=>{const n=r!==null,i=await F();d({root:o.loginAndPurchaseEl,query:"#loading",isVisible:!1}),d({root:o.loginAndPurchaseEl,query:"#loading2",isVisible:!1}),d({root:o.loginAndPurchaseEl,query:"button.signIn",isVisible:!n}),d({root:o.loginAndPurchaseEl,query:"button.signOut",isVisible:n}),d({root:o.loginAndPurchaseEl,query:"img.signIn",isVisible:!n}),d({root:o.loginAndPurchaseEl,query:"p.thanks",isVisible:n&&i});const a=n&&!i;if(d({root:o.loginAndPurchaseEl,query:"#loadingPayPal",isVisible:a}),d({root:o.loginAndPurchaseEl,query:"div.purchase",isVisible:a}),a)try{const s=await U(),c=o.loginAndPurchaseEl.dataset.vmkSection;if(c===void 0)throw new Error("vmkSection = undefined");const l=await R({vmkSection:c});if(l.data.price){const u=f({root:o.loginAndPurchaseEl,query:"div.price .normal"});if(u.innerHTML=`$${l.data.price.toFixed(2)}`,l.data.salePrice&&l.data.salePrice>0&&l.data.salePrice<l.data.price){u.classList.add("onSale");const p=f({root:o.loginAndPurchaseEl,query:"div.price .sale"});p.innerHTML=`$${l.data.salePrice.toFixed(2)}`,p.style.display="inline"}}const v=s.Buttons&&s.Buttons({onInit:()=>{d({root:o.loginAndPurchaseEl,query:"#loadingPayPal",isVisible:!1})},createOrder:async()=>{const u=await W({isSandbox:w(),vmkSection:c});return(u===void 0||u.data===void 0)&&alert(`Error creating order.  Please contact ${y} for help`),u.data.id},onApprove:async(u,p)=>{(await $({isSandbox:w(),orderId:u.orderID,vmkSection:c})).data.isPurchased&&setTimeout(()=>window.location.reload(),2e3)},onError:u=>{alert(`Error processing order. Try again, or please contact ${y} for help`),console.error(u)}});if(v===void 0)throw new Error("paypal.Buttons is undefined?");v.render("#payPalButton")}catch(s){console.error("failed to load the PayPal JS SDK script",s)}J(n&&i)}),f({root:o.loginAndPurchaseEl,query:"button.signIn"}).addEventListener("click",()=>k(h(),new q)),f({root:o.loginAndPurchaseEl,query:"button.signOut"}).addEventListener("click",()=>I(h())),window.unlockVideo=H}async function F(){const e=o.loginAndPurchaseEl.dataset.vmkSection;if(e===void 0||h().currentUser===null)return!1;try{const t=await C({vmkSection:e}),r=t.data.vmk!==void 0&&Object.keys(t.data.vmk).length>0;return r&&(o.vmk=t.data.vmk),r}catch(t){return console.error(t),!1}}function J(e){const t=document.querySelectorAll("div.card img.locked");for(const r of t)r instanceof HTMLImageElement&&(r.src=`/images/marekKnows/${e?"watch":"locked"}.png`)}function H(e){if(h().currentUser===null||o.vmk===void 0||o.vmk[e]===void 0){o.loginAndPurchaseEl.scrollIntoView({behavior:"smooth"});return}window.playYouTubeVideo(o.vmk[e])}const _=document.querySelectorAll("div.card img.locked");_.length>0&&N();
