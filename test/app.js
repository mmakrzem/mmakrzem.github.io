(()=>{"use strict";var e,t={592:function(e,t,r){var a=this&&this.__awaiter||function(e,t,r,a){return new(r||(r=Promise))((function(n,i){function o(e){try{l(a.next(e))}catch(e){i(e)}}function s(e){try{l(a.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?n(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(o,s)}l((a=a.apply(e,t||[])).next())}))},n=this&&this.__generator||function(e,t){var r,a,n,i,o={label:0,sent:function(){if(1&n[0])throw n[1];return n[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;o;)try{if(r=1,a&&(n=2&i[0]?a.return:i[0]?a.throw||((n=a.return)&&n.call(a),0):a.next)&&!(n=n.call(a,i[1])).done)return n;switch(a=0,n&&(i=[2&i[0],n.value]),i[0]){case 0:case 1:n=i;break;case 4:return o.label++,{value:i[1],done:!1};case 5:o.label++,a=i[1],i=[0];continue;case 7:i=o.ops.pop(),o.trys.pop();continue;default:if(!(n=o.trys,(n=n.length>0&&n[n.length-1])||6!==i[0]&&2!==i[0])){o=0;continue}if(3===i[0]&&(!n||i[1]>n[0]&&i[1]<n[3])){o.label=i[1];break}if(6===i[0]&&o.label<n[1]){o.label=n[1],n=i;break}if(n&&o.label<n[2]){o.label=n[2],o.ops.push(i);break}n[2]&&o.ops.pop(),o.trys.pop();continue}i=t.call(e,o)}catch(e){i=[6,e],a=0}finally{r=n=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),r(567);var o=i(r(260)),s=r(20),l=r(542),c=r(627),u=s.Constants.get();a(void 0,void 0,void 0,(function(){var e;return n(this,(function(t){switch(t.label){case 0:return document.title="".concat(u.app.title," v").concat(u.app.version),[4,c.Settings.initializeAsync()];case 1:return t.sent(),e={type:o.default.AUTO,width:u.app.size.x,height:u.app.size.y,dom:{createContainer:!0},parent:"game",physics:{default:"arcade",arcade:{debug:u.app.isDebugMode}},scale:{mode:o.default.Scale.FIT,autoCenter:o.default.Scale.CENTER_BOTH,min:{width:.25*u.app.size.x,height:.25*u.app.size.y}},scene:[l.PreLoader,l.GameScreen,l.TitleScreen,l.SettingsScreen,l.StatsScreen]},[2,new o.default.Game(e)]}}))}))},773:function(e,t,r){var a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.setGameSize=t.loadSvg=t.loadSprite=t.loadPng=t.loadHtml=t.loadAudio=t.createSolidColorBackground=void 0;var n=a(r(260)),i=r(20).Constants.get();t.createSolidColorBackground=function(e){return e.graphics.fillStyle(e.color).fillRect(0,0,i.app.size.x,i.app.size.y)},t.loadAudio=function(e){var t=i.assetKey.audio[e.audioId];e.scene.load.audio(t,["".concat(t,".ogg"),"".concat(t,".mp3")])},t.loadHtml=function(e){var t=i.assetKey.html[e.htmlId];e.scene.load.html(t,"".concat(t,".html"))},t.loadPng=function(e){var t=i.assetKey.png[e.pngId];e.scene.load.image(t,"".concat(t,".png"))},t.loadSprite=function(e){var t=i.assetKey.sprite[e.spriteId];e.scene.load.spritesheet(t,"".concat(t,".png"),e.frameConfig)},t.loadSvg=function(e){var t="".concat(i.assetKey.svg[e.svgId]);e.scene.load.svg(t,"".concat(t,".svg"),e.size)},t.setGameSize=function(e){e.scene.game.scale.scaleMode=e.autoScale?n.default.Scale.FIT:n.default.Scale.NONE,e.autoScale||e.scene.game.scale.setZoom(1),e.scene.game.scale.refresh()}},595:function(e,t,r){var a=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],a=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&a>=e.length&&(e=void 0),{value:e&&e[a++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(t,"__esModule",{value:!0}),t.get=void 0;var n=r(80),i=Object.freeze({app:{constantsInitialized:!1,isDebugMode:void 0,padding:10,size:Object.freeze({x:1024,y:768}),title:"Flip Flap",version:"".concat(n.RELEASES.CURRENT.major,".").concat(n.RELEASES.CURRENT.minor)},assetKey:Object.freeze({audio:{bgMusic:"",congrats:"",finished:"",flap:"",hitObject:"",hitWall:"",hover:"",scream:"",takeOff:""},html:{stats:""},png:{background:"",cloud1:"",cloud2:"",cloud3:"",ends:"",floorCeiling:"",metalBig:"",metalBox1:"",metalBox2:"",metalSmall:"",nest:"",tree:"","ui/banner":"","ui/buttonHome":"","ui/buttonPlay":"","ui/buttonReplay":"","ui/buttonSettings":"","ui/buttonSounds":"","ui/buttonStats":"","ui/leaders":"","ui/logo":"","ui/medal":"","ui/messageGameOver":"","ui/messageHighScore":"","ui/messagePlayer":"","ui/messagePress":"","ui/messageSounds":"","ui/off":"","ui/playerName":"","ui/scoreBackground":"","ui/scoreForeground":"","ui/settings":"","ui/signBackground":"","ui/star":"","ui/stats":"",wall:""},sprite:{bird:"",eggCrack:""},svg:{dummy:""}}),scenes:{gameScreen:"",settings:"",stats:"",title:""},storage:{settings:""},textStyles:{},values:{edgeOffset:25,tintColor:15724543,treeOffset:30,ui:{buttonOffsetX:300,fadeDuration:200,navButtonY:620,screenCenterX:512,signBackgroundY:120}}});function o(e){var t,r;try{for(var n=a(Object.keys(e)),i=n.next();!i.done;i=n.next()){var o=i.value;e[o]=o}}catch(e){t={error:e}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(t)throw t.error}}Object.freeze(e)}t.get=function(){var e;return i.app.constantsInitialized||(!function(){var e,t,r,n;try{for(var o=a(Object.keys(i.assetKey)),s=o.next();!s.done;s=o.next()){var l=s.value,c=i.assetKey[l];try{for(var u=(r=void 0,a(Object.keys(c))),d=u.next();!d.done;d=u.next()){var f=d.value;c[f]="assets/".concat(l,"/").concat(f)}}catch(e){r={error:e}}finally{try{d&&!d.done&&(n=u.return)&&n.call(u)}finally{if(r)throw r.error}}Object.freeze(c)}}catch(t){e={error:t}}finally{try{s&&!s.done&&(t=o.return)&&t.call(o)}finally{if(e)throw e.error}}Object.freeze(i.assetKey)}(),o(i.scenes),o(i.storage),e={copyright:{fontFamily:"Sans-serif",fontSize:"15px",color:"#fff",stroke:"#000",strokeThickness:2.2},normal:{fontFamily:"Sans-serif",fontSize:"24px",color:"#fff",stroke:"#000",strokeThickness:2.2},playerName:{fontFamily:"Sans-serif",fontSize:"35px",color:"#fff",stroke:"#000",strokeThickness:2.2},score:{fontSize:"25px",color:"#333"},bestScore:{fontSize:"20px",color:"#333"}},Object.assign(i.textStyles,e),Object.freeze(i.textStyles),i.app.constantsInitialized=!0),void 0===i.app.isDebugMode&&(i.app.isDebugMode=document.body.classList.contains("debugMode"),Object.freeze(i.app)),i}},668:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},255:function(e,t,r){var a=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],a=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&a>=e.length&&(e=void 0),{value:e&&e[a++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},n=this&&this.__read||function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var a,n,i=r.call(e),o=[];try{for(;(void 0===t||t-- >0)&&!(a=i.next()).done;)o.push(a.value)}catch(e){n={error:e}}finally{try{a&&!a.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}return o};Object.defineProperty(t,"__esModule",{value:!0}),t.resetCurrentState=t.getCurrentState=t.getActivatedButton=t.highlightButton=t.updateButtonStates=t.create=void 0;var i=r(20),o=i.Constants.get(),s={currentState:{settings:"_NONE_",stats:"_NONE_",title:"_NONE_"},keys:{cursor:void 0,enter:void 0,escape:void 0},states:{settings:new Map([["_NONE_",{down:"home",left:"home",right:"sound",up:"sound"}],["home",{down:void 0,left:void 0,right:"name",up:"name"}],["name",{down:"home",left:"home",right:"sound",up:"sound"}],["sound",{down:"name",left:"name",right:void 0,up:void 0}]]),stats:new Map([["_NONE_",{down:"home",left:"home",right:"home",up:"home"}],["home",{down:void 0,left:void 0,right:void 0,up:void 0}]]),title:new Map([["_NONE_",{down:"settings",left:"settings",right:"stats",up:"play"}],["play",{down:"settings",left:"settings",right:"stats",up:void 0}],["settings",{down:void 0,left:void 0,right:"stats",up:"play"}],["stats",{down:void 0,left:"settings",right:void 0,up:"play"}]])}};function l(e){var t,r=e.sceneId,a=e.moveDirection,n=s.currentState[r];switch(r){case"settings":case"stats":case"title":t=c({currentState:n,states:s.states[r],moveDirection:a})}return t}function c(e){var t=e.currentState,r=e.states,a=e.moveDirection,n=r.get(t);if(void 0!==n)return n[a];console.error("missing transition map for",t)}function u(e){var t,r,i=e.sceneId,o=e.isOver,l=e.button,c=e.navObjects,u=o?l:"_NONE_";try{for(var f=a(c.entries()),p=f.next();!p.done;p=f.next()){var y=n(p.value,2),g=y[0],v=y[1];d(g===u?{image:v,isOver:!0}:{image:v,isOver:!1})}}catch(e){t={error:e}}finally{try{p&&!p.done&&(r=f.return)&&r.call(f)}finally{if(t)throw t.error}}s.currentState[i]=o?l:"_NONE_"}function d(e){var t=e.image;e.isOver?(t.setTint(o.values.tintColor),i.SoundEffects.play("hover")):t.clearTint()}function f(e){return s.currentState[e]}t.create=function(e){s.keys={cursor:e.input.keyboard.createCursorKeys(),enter:e.input.keyboard.addKey("Enter"),escape:e.input.keyboard.addKey("Esc")}},t.updateButtonStates=function(e){var t,r=e.sceneId,a=e.navObjects;return Phaser.Input.Keyboard.JustUp(s.keys.cursor.down)?t=l({sceneId:r,moveDirection:"down"}):Phaser.Input.Keyboard.JustUp(s.keys.cursor.left)?t=l({sceneId:r,moveDirection:"left"}):Phaser.Input.Keyboard.JustUp(s.keys.cursor.right)?t=l({sceneId:r,moveDirection:"right"}):Phaser.Input.Keyboard.JustUp(s.keys.cursor.up)&&(t=l({sceneId:r,moveDirection:"up"})),t&&u({sceneId:r,isOver:"_NONE_"!==t,button:"_NONE_"!==t?t:"home",navObjects:a}),void 0!==t},t.highlightButton=u,t.getActivatedButton=function(e){return Phaser.Input.Keyboard.JustUp(s.keys.cursor.space)||Phaser.Input.Keyboard.JustUp(s.keys.enter)?f(e):"settings"!==e&&"stats"!==e||!Phaser.Input.Keyboard.JustUp(s.keys.escape)?void 0:"home"},t.getCurrentState=f,t.resetCurrentState=function(e){s.currentState[e]="_NONE_"}},383:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.landingHome=t.restart=t.hasBirdMoved=t.makeBirdFall=t.update=t.flap=t.takeOff=t.getHeight=t.create=void 0;var a=r(20),n=a.Constants.get(),i={allowSound:!0,bird:void 0,flapVelocityY:-300,gravityY:700,hit:void 0,lastPosition:{x:0,y:0},lastTime:-99,offset:{backwardX:10,forwardX:24,y:28},speedX:250,startPosition:{x:80,y:325}};function o(e){i.hit=e,i.bird.body.velocity.y=500}t.create=function(e){return i.bird=e.physics.add.sprite(i.startPosition.x,i.startPosition.y,n.assetKey.sprite.bird).setOrigin(.5).setBodySize(50,35).setOffset(i.offset.forwardX,i.offset.y).play(a.Sprites.getAnimationKeys().bird.idle),i.bird},t.getHeight=function(){return i.bird.body.height},t.takeOff=function(){i.bird.play(a.Sprites.getAnimationKeys().bird.fly),i.bird.body.gravity.y=i.gravityY,i.bird.body.velocity.x=i.speedX,i.lastPosition.x=i.bird.x,i.allowSound=!0,a.SoundEffects.play("takeOff")},t.flap=function(){i.bird.body.velocity.y=i.flapVelocityY,a.SoundEffects.play("flap")},t.update=function(e){var t={distanceTravelled:0,isGameOver:!1,isFlying:!0,isReversed:!1};i.bird.body.x+i.bird.body.width>=n.app.size.x-n.values.edgeOffset&&i.bird.body.velocity.x>0?(i.bird.body.velocity.x=-i.speedX,i.bird.setOffset(i.offset.backwardX,i.offset.y),i.bird.setFlipX(!0),t.isReversed=!0):i.bird.body.x<=n.values.edgeOffset&&i.bird.body.velocity.x<0&&(i.bird.body.velocity.x=i.speedX,i.bird.setOffset(i.offset.forwardX,i.offset.y),i.bird.setFlipX(!1),t.isReversed=!0);var r,s,l=!1;if(Math.abs(i.bird.body.velocity.x)<1&&i.bird.body.gravity.y>0||(r=.5*n.values.edgeOffset,(s=i.bird.body.y<=r)&&(i.hit="ceiling"),s)){l=!0,t.isFlying=!1;var c=void 0;switch(i.hit){case"ceiling":c="scream";break;case"object":c="hitObject";break;case"wall":c="hitWall"}c&&i.allowSound&&(a.SoundEffects.play(c),e.time.delayedCall(800,(function(){console.log("not allowed"),i.allowSound=!1}))),o()}else t.distanceTravelled=Math.abs(i.bird.x-i.lastPosition.x),i.lastPosition.x=i.bird.x,i.hit=void 0;return i.bird.body.y+i.bird.body.height>=n.app.size.y-n.values.edgeOffset&&(l=!0,i.bird.body.velocity.y=0,i.bird.body.gravity.y=0,t.isGameOver=!0,i.allowSound&&a.SoundEffects.play("scream")),l&&(i.bird.setTint(12303291),i.bird.body.velocity.x=0,i.bird.play(a.Sprites.getAnimationKeys().bird.dead,!0)),t},t.makeBirdFall=o,t.hasBirdMoved=function(){var e=Math.abs(i.bird.y-i.lastPosition.y)>0;return i.lastPosition.y=i.bird.y,e},t.restart=function(){Object.assign(i.bird,i.startPosition),i.bird.body.velocity.x=0,i.bird.body.velocity.y=0,i.bird.body.gravity.y=0,i.bird.clearTint(),i.bird.play(a.Sprites.getAnimationKeys().bird.idle),i.bird.setFlipX(!1),i.bird.setOffset(i.offset.forwardX,i.offset.y)},t.landingHome=function(e){i.bird.setFlipX(!0),i.bird.body.velocity.x=0,i.bird.body.velocity.y=0,i.bird.body.gravity.y=0;var t=2500*Math.abs(467-i.bird.y)/467;return e.tweens.add({targets:i.bird,x:945,y:467,ease:"Sine.easeOut",duration:t,onComplete:function(){i.bird.play(a.Sprites.getAnimationKeys().bird.idle)}}),t}},794:function(e,t,r){var a=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],a=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&a>=e.length&&(e=void 0),{value:e&&e[a++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},n=this&&this.__read||function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var a,n,i=r.call(e),o=[];try{for(;(void 0===t||t-- >0)&&!(a=i.next()).done;)o.push(a.value)}catch(e){n={error:e}}finally{try{a&&!a.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}return o};Object.defineProperty(t,"__esModule",{value:!0}),t.enable=t.resume=t.pause=t.stop=t.playConfig=t.play=t.create=void 0;var i=r(20),o=r(627),s=i.Constants.get(),l={isEnabled:!0,audioAsset:{}};function c(e){var t=l.audioAsset[e];return t||console.error("".concat(e," has not been loaded in a scene")),t}function u(e){if(l.isEnabled){var t=c(e.audioId);void 0!==t&&t.play(e.config)}}function d(e){l.isEnabled=e}t.create=function(e){var t,r;try{for(var i=a(Object.entries(s.assetKey.audio)),c=i.next();!c.done;c=i.next()){var u=n(c.value,2),f=u[0],p=u[1],y=void 0;"bgMusic"===f&&(y={loop:!0}),l.audioAsset[f]=e.sound.add(p,y)}}catch(e){t={error:e}}finally{try{c&&!c.done&&(r=i.return)&&r.call(i)}finally{if(t)throw t.error}}d(o.Settings.get("enableSounds"))},t.play=function(e){u({audioId:e})},t.playConfig=function(e){u(e)},t.stop=function(e){var t=c(e);void 0!==t&&t.isPlaying&&t.stop()},t.pause=function(e){var t=c(e);void 0!==t&&!t.isPaused&&t.isPlaying&&t.pause()},t.resume=function(e){var t=c(e);void 0!==t&&l.isEnabled&&!t.isPlaying&&(t.isPaused?t.resume():t.play())},t.enable=d},487:function(e,t,r){var a=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],a=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&a>=e.length&&(e=void 0),{value:e&&e[a++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(t,"__esModule",{value:!0}),t.create=t.preload=t.getAnimationKeys=void 0;var n=r(20),i=n.Constants.get(),o={animations:{bird:{dead:"",fly:"",idle:""},eggCrack:{hatch:""}}};t.getAnimationKeys=function(){return o.animations},t.preload=function(e){n.Common.loadSprite({scene:e,spriteId:"bird",frameConfig:{frameWidth:82,frameHeight:77,endFrame:73}}),n.Common.loadSprite({scene:e,spriteId:"eggCrack",frameConfig:{frameWidth:76,frameHeight:46,endFrame:39}})},t.create=function(e){!function(){var e,t,r,n;try{for(var i=a(Object.keys(o.animations)),s=i.next();!s.done;s=i.next()){var l=s.value,c=o.animations[l];try{for(var u=(r=void 0,a(Object.keys(c))),d=u.next();!d.done;d=u.next()){var f=d.value;c[f]="".concat(l,"_").concat(f)}}catch(e){r={error:e}}finally{try{d&&!d.done&&(n=u.return)&&n.call(u)}finally{if(r)throw r.error}}Object.freeze(c)}}catch(t){e={error:t}}finally{try{s&&!s.done&&(t=i.return)&&t.call(i)}finally{if(e)throw e.error}}Object.freeze(o.animations)}(),e.anims.create({key:o.animations.bird.dead,frames:e.anims.generateFrameNumbers(i.assetKey.sprite.bird,{start:64,end:73}),frameRate:10,repeat:-1}),e.anims.create({key:o.animations.bird.fly,frames:e.anims.generateFrameNumbers(i.assetKey.sprite.bird,{start:0,end:29}),frameRate:20,repeat:-1}),e.anims.create({key:o.animations.bird.idle,frames:e.anims.generateFrameNumbers(i.assetKey.sprite.bird,{start:32,end:61}),frameRate:10,repeat:-1}),e.anims.create({key:o.animations.eggCrack.hatch,frames:e.anims.generateFrameNumbers(i.assetKey.sprite.eggCrack,{start:0,end:39}),frameRate:10,repeat:0})}},612:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.makeButton=t.createSignBackground=void 0;var a=r(20).Constants.get();t.createSignBackground=function(e){var t=a.values.ui.screenCenterX,r=a.values.ui.signBackgroundY;return e.add.image(t,r,a.assetKey.png["ui/signBackground"]).setOrigin(.5,0)},t.makeButton=function(e){var t=e.image,r=e.onPress,a=e.onHover;return t.setInteractive().on("pointerup",(function(){return r()})).on("pointerover",(function(){return a(!0)})).on("pointerout",(function(){return a(!1)}))}},80:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.RELEASES=void 0,t.RELEASES=Object.freeze({FIRST:{major:2022,minor:1},V2022_2:{major:2022,minor:2},CURRENT:{major:2022,minor:2}})},20:function(e,t,r){var a=this&&this.__createBinding||(Object.create?function(e,t,r,a){void 0===a&&(a=r),Object.defineProperty(e,a,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,a){void 0===a&&(a=r),e[a]=t[r]}),n=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||a(t,e,r)},o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&a(t,e,r);return n(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.VersionHistory=t.UiBuilder=t.Sprites=t.SoundEffects=t.Player=t.KeyboardNavigator=t.Common=t.Constants=void 0,i(r(668),t),t.Constants=o(r(595)),t.Common=o(r(773)),t.KeyboardNavigator=o(r(255)),t.Player=o(r(383)),t.SoundEffects=o(r(794)),t.Sprites=o(r(487)),t.UiBuilder=o(r(612)),t.VersionHistory=o(r(80))},925:function(e,t,r){var a,n=this&&this.__extends||(a=function(e,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},a(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),i=this&&this.__assign||function(){return i=Object.assign||function(e){for(var t,r=1,a=arguments.length;r<a;r++)for(var n in t=arguments[r])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e},i.apply(this,arguments)},o=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],a=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&a>=e.length&&(e=void 0),{value:e&&e[a++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.onAction=t.GameScreen=void 0;var l=s(r(260)),c=r(20),u=r(627),d=c.Constants.get();function f(){return{gameState:"idle",reversals:d.app.isDebugMode?2:0,stats:{numFlaps:0,numSlides:0,distanceTravelled:0}}}var p=i(i({},f()),{backgroundGraphics:void 0,depth:{edgeWalls:1,eggs:3,nest:5,player:4,tree:2,ui:10,walls:2},difficulty:[],eggs:void 0,header:{best:{prefix:"Best: ",text:void 0},score:{prefix:"Score: ",text:void 0}},keyboard:{isActive:!1,enter:void 0,space:void 0,up:void 0},nest:void 0,numClouds:4,objects:{onLeft:{group:void 0,collider:void 0},onRight:{group:void 0,collider:void 0}},occupied:{grid:[],max:{x:4,y:10}},player:void 0,tree:{homeCollider:void 0,image:void 0,trunkCollider:void 0},wall:{gap:{factor:{min:2.5,randomDelta:.5,startValue:5.5,value:0},size:0},group:void 0}}),y=function(e){function t(){return e.call(this,d.scenes.gameScreen)||this}return n(t,e),t.prototype.preload=function(){p.difficulty.push({big:0,boxStack:!1,box:0,small:2},{big:0,boxStack:!1,box:0,small:3},{big:0,boxStack:!1,box:1,small:2},{big:0,boxStack:!1,box:1,small:3},{big:0,boxStack:!1,box:2,small:2},{big:0,boxStack:!0,box:2,small:2},{big:0,boxStack:!0,box:2,small:3},{big:0,boxStack:!0,box:3,small:2},{big:1,boxStack:!1,box:2,small:1},{big:2,boxStack:!0,box:2,small:0},{big:2,boxStack:!0,box:2,small:2},{big:1,boxStack:!1,box:2,small:4},{big:1,boxStack:!0,box:4,small:1})},t.prototype.create=function(){!function(e){(function(e){p.backgroundGraphics=e.add.graphics();var t=.5*d.app.size.y;p.backgroundGraphics.fillStyle(13694199).fillRect(0,0,d.app.size.x,t),p.backgroundGraphics.fillStyle(12642540).fillRect(0,t,d.app.size.x,t),e.add.image(0,t,d.assetKey.png.background).setOrigin(0,.5)})(e),function(e){var t,r;try{for(var a=o(Array.from({length:p.numClouds}).map((function(e,t){return t}))),n=a.next();!n.done;n=a.next()){g({scene:e,initialCloudIndex:n.value})}}catch(e){t={error:e}}finally{try{n&&!n.done&&(r=a.return)&&r.call(a)}finally{if(t)throw t.error}}}(e),p.player=c.Player.create(e),p.player.setDepth(p.depth.player),function(e){p.tree.image=e.add.image(d.values.treeOffset,d.app.size.y-d.values.edgeOffset,d.assetKey.png.tree).setOrigin(.5,1).setDepth(p.depth.tree);var t=50,r={x:978,y:535},a=e.add.rectangle(r.x,r.y,t,215).setOrigin(0);p.tree.trunkCollider=e.physics.add.collider(p.player,e.physics.add.staticGroup(a),v),p.tree.trunkCollider.active=!1;var n=e.add.rectangle(r.x,r.y,t,d.app.size.y).setOrigin(0,1);p.tree.homeCollider=e.physics.add.collider(p.player,e.physics.add.staticGroup(n),(function(){return function(e){if("finished"===p.gameState)return;p.gameState="finished",b({scene:e,isOn:!1});var t=c.Player.landingHome(e);e.time.delayedCall(t,(function(){return p.nest.setVisible(!0)})),e.time.delayedCall(t+1e3,_,[e])}(e)})),p.tree.homeCollider.active=!1,p.eggs=e.add.sprite(983,512,d.assetKey.sprite.eggCrack).setOrigin(1).setDepth(p.depth.eggs).setVisible(!1),p.nest=e.add.image(981,510,d.assetKey.png.nest).setOrigin(1).setDepth(p.depth.nest).setVisible(!1)}(e),p.wall.group=e.physics.add.group(),function(e){var t,r,a=d.values.edgeOffset,n=[e.add.image(a,0,d.assetKey.png.ends).setOrigin(1,0),e.add.image(d.app.size.x-a,0,d.assetKey.png.ends).setOrigin(0),e.add.image(0,a,d.assetKey.png.floorCeiling).setOrigin(0,1)];try{for(var i=o(n),s=i.next();!s.done;s=i.next()){s.value.setDepth(p.depth.edgeWalls)}}catch(e){t={error:e}}finally{try{s&&!s.done&&(r=i.return)&&r.call(i)}finally{if(t)throw t.error}}var l=e.physics.add.sprite(0,d.app.size.y-a,d.assetKey.png.floorCeiling).setOrigin(0,.19).setPushable(!1).setDepth(p.depth.walls).setOffset(0,14);e.physics.add.collider(p.player,l,void 0,j)}(e),function(e){var t=5,r=d.values.edgeOffset+t,a=d.values.edgeOffset;p.header.score.text=e.add.text(r,a,"".concat(p.header.score.prefix,"0"),d.textStyles.score).setDepth(p.depth.ui),a+=p.header.score.text.height+t,p.header.best.text=e.add.text(r,a,"".concat(p.header.best.prefix).concat(u.Settings.getValue("highScore")),d.textStyles.bestScore).setDepth(p.depth.ui)}(e),function(e){var t,r,a=d.values.ui.screenCenterX,n=[e.physics.add.sprite(a,0,d.assetKey.png.wall).setOrigin(.5,1),e.physics.add.sprite(a,0,d.assetKey.png.wall).setOrigin(.5,0)];try{for(var i=o(n),s=i.next();!s.done;s=i.next()){var l=s.value;l.setPushable(!1).setDepth(p.depth.walls),p.wall.group.add(l)}}catch(e){t={error:e}}finally{try{s&&!s.done&&(r=i.return)&&r.call(i)}finally{if(t)throw t.error}}h(),m()}(e),e.physics.add.collider(p.player,p.wall.group,void 0,S),p.objects.onLeft.group=e.physics.add.group(),p.objects.onRight.group=e.physics.add.group(),p.keyboard={isActive:!1,enter:e.input.keyboard.addKey("Enter"),space:e.input.keyboard.addKey("Space"),up:e.input.keyboard.addKey("Up")};var t={state:"start",completed:0};e.scene.launch(d.scenes.title,t)}(this)},t.prototype.update=function(e,t){!function(e){p.keyboard.isActive&&(l.default.Input.Keyboard.JustDown(p.keyboard.enter)||l.default.Input.Keyboard.JustDown(p.keyboard.space)||l.default.Input.Keyboard.JustDown(p.keyboard.up))&&O();switch(p.gameState){case"flying":w((t=c.Player.update(e)).distanceTravelled),t.isGameOver?(p.gameState="dead",_(e)):t.isFlying?t.isReversed&&function(e){++p.reversals,64===p.reversals?(p.tree.image.visible=!0,p.tree.image.setX(d.app.size.x-d.values.treeOffset),p.tree.homeCollider.active=!0,p.tree.trunkCollider.active=!0,p.eggs.setVisible(!0).play(c.Sprites.getAnimationKeys().eggCrack.hatch)):p.tree.image.visible=!1;p.reversals%5==0&&h();m(),function(e){var t;if(p.reversals<3||64===p.reversals)return;var r=p.reversals%2==1,a=r?p.objects.onLeft:p.objects.onRight;null===(t=a.collider)||void 0===t||t.destroy(),a.group.clear(!0,!0),p.occupied.grid=[];for(var n=0;n<p.occupied.max.x;++n)p.occupied.grid.push(Array.from({length:p.occupied.max.y}).map((function(){return!1})));var i=Math.min(Math.floor((p.reversals+2)/5)-1,p.difficulty.length-1),o=p.difficulty[i];N({type:"big",numObjects:o.big,isStacked:!1,updateLeftSide:r,scene:e}),N({type:"box",numObjects:o.box,isStacked:o.boxStack,updateLeftSide:r,scene:e}),N({type:"small",numObjects:o.small,isStacked:!1,updateLeftSide:r,scene:e}),a.collider=e.physics.add.collider(p.player,a.group,void 0,j)}(e)}(e):p.gameState="dying";break;case"dying":var t;!(t=c.Player.update(e)).isGameOver&&c.Player.hasBirdMoved()||(p.gameState="dead",_(e))}}(this)},t.prototype.startPlay=function(){b({scene:this,isOn:!0}),O()},t.prototype.clearHighScore=function(){p.header.best.text.setText("".concat(p.header.best.prefix,"0"))},t}(l.default.Scene);function g(e){var t=e.scene,r=e.initialCloudIndex,a="";switch(l.default.Math.Between(1,3)){case 1:a=d.assetKey.png.cloud1;break;case 2:a=d.assetKey.png.cloud2;break;case 3:a=d.assetKey.png.cloud3}var n=d.app.size.x,i=l.default.Math.Between(3e4,37e3);if(void 0!==r){i=(n=(d.app.size.x-130*p.numClouds)/(p.numClouds+1)*(r+1)+130*r)/(d.app.size.x/i)}var o=l.default.Math.Between(50,.31*d.app.size.y),s=t.add.image(n,o,a).setOrigin(0);t.tweens.add({targets:s,x:-s.width,ease:"Linear",duration:i,onComplete:function(){s.destroy(),g({scene:t})}})}function v(){"dying"!==p.gameState&&(p.gameState="dying")}function b(e){p.keyboard.isActive=e.isOn,e.isOn?e.scene.input.on("pointerdown",O):e.scene.input.off("pointerdown")}function h(){var e=p.wall.gap.factor.startValue-.25*p.reversals/5;p.wall.gap.factor.value=Math.max(p.wall.gap.factor.min,e),p.wall.gap.size=l.default.Math.Between(p.wall.gap.factor.value,p.wall.gap.factor.value-p.wall.gap.factor.randomDelta)*c.Player.getHeight()}function m(){var e,t,r=c.Player.getHeight(),a=0,n=0;try{for(var i=o(p.wall.group.getChildren()),s=i.next();!s.done;s=i.next()){var u=s.value;if(u instanceof l.default.Physics.Arcade.Sprite){if(a%2==0){var f=u.y;n=0;for(var y=!1;!y;)n=l.default.Math.Between(r,d.app.size.y-r-p.wall.gap.size),y=Math.abs(f-n)>50}u.y=n,n+=p.wall.gap.size,++a}}}catch(t){e={error:t}}finally{try{s&&!s.done&&(t=i.return)&&t.call(i)}finally{if(e)throw e.error}}}function S(){"flying"===p.gameState&&(c.Player.makeBirdFall("wall"),++p.stats.numSlides)}function O(){var e=!1;switch(p.gameState){case"idle":c.Player.takeOff(),p.gameState="flying",e=!0,c.SoundEffects.play("bgMusic");break;case"flying":e=!0;break;case"finished":case"dead":!function(){p.objects.onLeft.collider&&(p.objects.onLeft.collider.destroy(),p.objects.onLeft.collider=void 0);p.objects.onRight.collider&&(p.objects.onRight.collider.destroy(),p.objects.onRight.collider=void 0);p.objects.onLeft.group.clear(!0,!0),p.objects.onRight.group.clear(!0,!0),p.tree.image.setX(d.values.treeOffset),p.tree.homeCollider.active=!1,p.tree.trunkCollider.active=!1,p.tree.image.visible=!0,p.eggs.setVisible(!1),p.nest.setVisible(!1),Object.assign(p,f()),w(0),c.Player.restart(),h(),m()}()}e&&(c.Player.flap(),++p.stats.numFlaps)}function x(){return p.stats.numFlaps<1?0:Math.max(0,Math.trunc(p.stats.distanceTravelled-8*(p.stats.numFlaps-1)+10*p.stats.numSlides))}function w(e){p.stats.distanceTravelled+=.1*e,p.header.score.text.setText("".concat(p.header.score.prefix).concat(x()))}function _(e){64===p.reversals&&"finished"!==p.gameState&&(p.eggs.setVisible(!1),p.nest.setVisible(!0));var t=x();u.Settings.setLeader(t);var r=u.Settings.getValue("highScore"),a={state:"gameOver",completed:k()},n=!1;t>r&&(a.state="highScore",r=t,u.Settings.setValue({key:"highScore",value:r}),p.header.best.text.setText("".concat(p.header.best.prefix).concat(r)),n=!0),c.SoundEffects.stop("bgMusic"),"finished"===p.gameState&&(a.state="atHome",n=!1,c.SoundEffects.play("finished")),n&&c.SoundEffects.play("congrats"),e.scene.launch(d.scenes.title,a),b({scene:e,isOn:!1})}function k(){if("finished"===p.gameState)return 100;var e=p.reversals/65,t=(p.reversals%2==0?p.player.x:d.app.size.x-p.player.x)/(65*d.app.size.x);return Math.min(99,100*(e+t))}function j(){"flying"===p.gameState&&c.Player.makeBirdFall("object")}function N(e){for(var t=e.type,r=e.updateLeftSide,a=e.scene,n=e.isStacked,i=e.numObjects,o=0,s=r?p.objects.onLeft.group:p.objects.onRight.group,c=0,u=0,d=0;o<i&&c<100;)n?0===o?(u=l.default.Math.Between(0,p.occupied.max.x-("big"===t?3:1)),d=l.default.Math.Between(0,p.occupied.max.y-3)):++d:(u=l.default.Math.Between(0,p.occupied.max.x-("big"===t?3:1)),d=l.default.Math.Between(0,p.occupied.max.y-1)),K({x:u,y:d,type:t})?(P({x:u,y:d,type:t,isStacked:n}),s.add(B({x:u,y:d,type:t,scene:a,updateLeftSide:r})),++o):++c}function K(e){var t=e.x,r=e.y;return"big"===e.type?!p.occupied.grid[t][r]&&!p.occupied.grid[t+1][r]&&!p.occupied.grid[t+2][r]:!p.occupied.grid[t][r]}function P(e){for(var t=e.x+("big"===e.type?2:0),r=e.x;r<=t;++r)C({x:r,y:e.y}),e.isStacked||(C({x:r,y:e.y-1}),C({x:r,y:e.y+1}))}function C(e){var t=e.x,r=e.y;t>=0&&t<p.occupied.max.x&&r>=0&&r<p.occupied.max.y&&(p.occupied.grid[t][r]=!0)}function B(e){var t;switch(e.type){case"big":t=d.assetKey.png.metalBig;break;case"small":t=d.assetKey.png.metalSmall;break;case"box":t=0===l.default.Math.Between(0,1)?d.assetKey.png.metalBox1:d.assetKey.png.metalBox2}var r=e.updateLeftSide?120:d.app.size.x-330;return e.scene.physics.add.sprite(r+52*e.x,100+56*e.y,t).setScale(.5).setOrigin(0,.5).setPushable(!1).setDepth(p.depth.walls)}t.GameScreen=y,t.onAction=O},471:function(e,t,r){var a,n=this&&this.__extends||(a=function(e,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},a(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),i=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],a=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&a>=e.length&&(e=void 0),{value:e&&e[a++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.PreLoader=void 0;var s=o(r(260)),l=r(20),c=r(627),u=l.Constants.get(),d=function(e){function t(){return e.call(this,"PreLoader-".concat(u.app.title))||this}return n(t,e),t.prototype.preload=function(){!function(e){var t,r,a,n;try{for(var o=i(Object.keys(u.assetKey.png)),s=o.next();!s.done;s=o.next()){var d=s.value;l.Common.loadPng({scene:e,pngId:d})}}catch(e){t={error:e}}finally{try{s&&!s.done&&(r=o.return)&&r.call(o)}finally{if(t)throw t.error}}try{for(var f=i(Object.keys(u.assetKey.audio)),p=f.next();!p.done;p=f.next()){var y=p.value;l.Common.loadAudio({scene:e,audioId:y})}}catch(e){a={error:e}}finally{try{p&&!p.done&&(n=f.return)&&n.call(f)}finally{if(a)throw a.error}}l.Sprites.preload(e),l.Common.setGameSize({scene:e,autoScale:c.Settings.get("autoScale")})}(this)},t.prototype.create=function(){var e;e=this,l.Sprites.create(e),l.SoundEffects.create(e),e.scene.start(u.scenes.gameScreen)},t}(s.default.Scene);t.PreLoader=d},554:function(e,t,r){var a,n=this&&this.__extends||(a=function(e,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},a(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),i=this&&this.__assign||function(){return i=Object.assign||function(e){for(var t,r=1,a=arguments.length;r<a;r++)for(var n in t=arguments[r])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e},i.apply(this,arguments)},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.SettingsScreen=void 0;var s=o(r(260)),l=r(20),c=r(627),u=l.Constants.get(),d={keyInputEl:void 0,layer:void 0,navObjects:new Map,playerName:{inputCursor:void 0,inputText:void 0,maxLength:5,nameInputInfo:void 0,newName:"",validKeys:"abcdefghijklmnopqrstuvwxyz0123456789.-_!$&+-/*=^%"},sceneId:"settings",soundsOff:void 0},f=function(e){function t(){return e.call(this,u.scenes.settings)||this}return n(t,e),t.prototype.create=function(){var e;e=this,d.layer=e.add.layer(),d.layer.setAlpha(0),d.keyInputEl=document.querySelector("#keyInput"),function(e){var t=l.UiBuilder.createSignBackground(e);d.layer.add(t);var r=u.values.ui.screenCenterX,a=u.values.ui.signBackgroundY;t=e.add.image(r,a,u.assetKey.png["ui/banner"]).setOrigin(.5),d.layer.add(t),a-=25,t=e.add.image(r,a,u.assetKey.png["ui/settings"]).setOrigin(.5),d.layer.add(t),a+=45;var n=e.add.text(r,a,"v".concat(u.app.version),u.textStyles.normal).setOrigin(.5,0);d.layer.add(n),r+=10,a=270,t=e.add.image(r,a,u.assetKey.png["ui/messageSounds"]).setOrigin(.5),d.layer.add(t);var o=.7;r-=.5*t.width+60,t=e.add.image(r,a,u.assetKey.png["ui/buttonSounds"]).setScale(o).setOrigin(.5),d.navObjects.set("sound",l.UiBuilder.makeButton({image:t,onPress:function(){return y()},onHover:function(t){return g({scene:e,button:"sound",isOver:t})}})),d.layer.add(t),d.soundsOff=e.add.image(r,a,u.assetKey.png["ui/off"]).setScale(o).setOrigin(.5),c.Settings.get("enableSounds")&&d.soundsOff.setVisible(!1),d.layer.add(d.soundsOff),function(e){d.playerName.newName=c.Settings.getString("playerName");var t=u.values.ui.screenCenterX,r=420,a=e.add.image(t,r,u.assetKey.png["ui/playerName"]).setOrigin(.5);d.navObjects.set("name",l.UiBuilder.makeButton({image:a,onPress:function(){return v({allow:!0,scene:e})},onHover:function(e){return l.KeyboardNavigator.highlightButton({sceneId:d.sceneId,isOver:e,button:"name",navObjects:d.navObjects})}})),d.layer.add(a),t=560,d.playerName.inputText=e.add.text(t,r,d.playerName.newName,i(i({},u.textStyles.playerName),{fontSize:"45px"})).setOrigin(.5),d.layer.add(d.playerName.inputText),d.playerName.inputCursor=e.add.text(b(),r-5,"|",i(i({},d.playerName.inputText.style),{stroke:"#fff"})).setScale(.5,1).setVisible(!1).setOrigin(.5),d.layer.add(d.playerName.inputCursor),r+=65,d.playerName.nameInputInfo=e.add.text(t,r,"",u.textStyles.normal).setVisible(!1).setOrigin(.5),d.layer.add(d.playerName.nameInputInfo),e.tweens.add({targets:d.playerName.inputCursor,alpha:0,duration:500,loop:-1,yoyo:!0,ease:"Sine.easeIn"})}(e),r=u.values.ui.buttonOffsetX,a=u.values.ui.navButtonY,t=e.add.image(r,a,u.assetKey.png["ui/buttonHome"]).setOrigin(.5),d.navObjects.set("home",l.UiBuilder.makeButton({image:t,onPress:function(){return p(e)},onHover:function(t){return g({scene:e,button:"home",isOver:t})}})),d.layer.add(t),r=u.app.size.x-170,a-=12,n=e.add.text(r,a,"(c) 2022 Marek A. Krzeminski. All Rights Reserved",u.textStyles.copyright).setOrigin(1),d.layer.add(n)}(e),l.KeyboardNavigator.create(e),l.KeyboardNavigator.resetCurrentState("settings"),e.tweens.add({targets:d.layer,alpha:1,duration:u.values.ui.fadeDuration})},t.prototype.update=function(e,t){!function(e){if(l.KeyboardNavigator.updateButtonStates({sceneId:d.sceneId,navObjects:d.navObjects})){return void("name"!==l.KeyboardNavigator.getCurrentState(d.sceneId)&&v({allow:!1,scene:e}))}switch(l.KeyboardNavigator.getActivatedButton(d.sceneId)){case"sound":y();break;case"home":p(e);break;case"name":v({allow:!0,scene:e})}}(this)},t}(s.default.Scene);function p(e){if(c.Settings.getString("playerName")!==d.playerName.newName){var t=d.playerName.newName;0===t.length&&(t=c.Settings.generateRandomName()),c.Settings.setString({key:"playerName",str:t}),c.Settings.setValue({key:"highScore",value:0}),e.scene.get(u.scenes.gameScreen).clearHighScore()}e.scene.stop(),d.layer.destroy();e.scene.launch(u.scenes.title,{state:"start",completed:0})}function y(){var e=!c.Settings.get("enableSounds");c.Settings.set({key:"enableSounds",value:e}),l.SoundEffects.enable(e),d.soundsOff.setVisible(!e)}function g(e){var t=e.scene,r=e.button,a=e.isOver;"name"!==r&&v({allow:!1,scene:t}),l.KeyboardNavigator.highlightButton({sceneId:d.sceneId,isOver:a,button:r,navObjects:d.navObjects})}function v(e){var t=e.allow,r=e.scene;d.playerName.inputCursor.setVisible(t),d.playerName.nameInputInfo.setVisible(t),t?(r.input.keyboard.on("keyup",(function(e){return function(e){var t=e.key,r=e.scene;if(!function(e){if("Backspace"===e||"Enter"===e)return!0;if(1!==e.length)return!1;var t=e.toLocaleLowerCase();return d.playerName.validKeys.includes(t)}(t))return;if("Enter"===t)return v({allow:!1,scene:r}),void l.KeyboardNavigator.resetCurrentState("settings");"Backspace"===t?d.playerName.newName.length>0&&(d.playerName.newName=d.playerName.newName.slice(0,Math.max(0,d.playerName.newName.length-1))):d.playerName.newName.length<d.playerName.maxLength&&(d.playerName.newName+=t);d.playerName.inputText.setText(d.playerName.newName),d.playerName.inputCursor.setX(b()),function(){var e="";d.playerName.newName.length===d.playerName.maxLength?e="Max ".concat(d.playerName.maxLength," characters"):0===d.playerName.newName.length&&(e="Invalid name");d.playerName.nameInputInfo.setVisible(!0).setText(e)}()}({key:e.key,scene:r})})),d.keyInputEl.focus()):(r.input.keyboard.off("keyup"),d.keyInputEl.blur())}function b(){return d.playerName.inputText.x+.5*d.playerName.inputText.width+3}t.SettingsScreen=f},620:function(e,t,r){var a,n=this&&this.__extends||(a=function(e,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},a(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),i=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],a=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&a>=e.length&&(e=void 0),{value:e&&e[a++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.StatsScreen=void 0;var s=o(r(260)),l=r(20),c=r(627),u=l.Constants.get(),d={layer:void 0,navObjects:new Map,sceneId:"stats",statsEl:void 0},f=function(e){function t(){return e.call(this,u.scenes.stats)||this}return n(t,e),t.prototype.preload=function(){l.Common.loadHtml({scene:this,htmlId:"stats"})},t.prototype.create=function(){var e;e=this,d.layer=e.add.layer(),d.layer.setAlpha(0),function(e){var t=l.UiBuilder.createSignBackground(e);d.layer.add(t);var r=u.values.ui.screenCenterX,a=u.values.ui.signBackgroundY;t=e.add.image(r,a,u.assetKey.png["ui/banner"]).setOrigin(.5),d.layer.add(t),a-=27,t=e.add.image(r-2,a,u.assetKey.png["ui/leaders"]).setOrigin(.5),d.layer.add(t),a+=90,d.statsEl=e.add.dom(r,a).createFromCache(u.assetKey.html.stats).setOrigin(.5,0),d.layer.add(d.statsEl),r=355,a=103;var n=.17;t=e.add.image(r,a,u.assetKey.png["ui/stats"]).setScale(.5).setRotation(-n).setOrigin(.5),d.layer.add(t),r=668,t=e.add.image(r,a,u.assetKey.png["ui/stats"]).setScale(.5).setRotation(n).setOrigin(.5),d.layer.add(t),function(){var e,t,r=function(e){var t=d.statsEl.getChildByID(e);if(t instanceof HTMLElement)return t;throw new ReferenceError("could not find element with id=".concat(e))}("statsTable"),a=c.Settings.getLeaders();try{for(var n=i(a),o=n.next();!o.done;o=n.next())y({tableEl:r,leader:o.value})}catch(t){e={error:t}}finally{try{o&&!o.done&&(t=n.return)&&t.call(n)}finally{if(e)throw e.error}}}(),r=u.values.ui.buttonOffsetX,a=u.values.ui.navButtonY,t=e.add.image(r,a,u.assetKey.png["ui/buttonHome"]).setOrigin(.5),d.navObjects.set("home",l.UiBuilder.makeButton({image:t,onPress:function(){return p(e)},onHover:function(e){return l.KeyboardNavigator.highlightButton({sceneId:d.sceneId,isOver:e,button:"home",navObjects:d.navObjects})}})),d.layer.add(t)}(e),l.KeyboardNavigator.create(e),l.KeyboardNavigator.resetCurrentState("stats"),e.tweens.add({targets:d.layer,alpha:1,duration:u.values.ui.fadeDuration})},t.prototype.update=function(e,t){!function(e){if(l.KeyboardNavigator.updateButtonStates({sceneId:d.sceneId,navObjects:d.navObjects}))return;if("home"===l.KeyboardNavigator.getActivatedButton(d.sceneId))p(e)}(this)},t}(s.default.Scene);function p(e){e.scene.stop(),d.layer.destroy();e.scene.launch(u.scenes.title,{state:"start",completed:0})}function y(e){var t=e.tableEl,r=e.leader,a=document.createElement("div");a.innerHTML="".concat(r.score),t.append(a),(a=document.createElement("div")).innerHTML=r.playerName,t.append(a),(a=document.createElement("div")).innerHTML="".concat(new Date(r.date).toLocaleDateString(void 0,{day:"numeric",month:"short",year:"numeric"})),t.append(a)}t.StatsScreen=f},2:function(e,t,r){var a,n=this&&this.__extends||(a=function(e,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},a(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),i=this&&this.__assign||function(){return i=Object.assign||function(e){for(var t,r=1,a=arguments.length;r<a;r++)for(var n in t=arguments[r])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e},i.apply(this,arguments)},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.TitleScreen=void 0;var s=o(r(260)),l=r(20),c=r(627),u=l.Constants.get(),d={data:void 0,layer:void 0,navObjects:new Map,sceneId:"title"},f=function(e){function t(){return e.call(this,u.scenes.title)||this}return n(t,e),t.prototype.init=function(e){var t;t={scene:this,data:e},d.data=t.data},t.prototype.create=function(){var e;e=this,d.layer=e.add.layer(),d.layer.setAlpha(0),function(e){var t=l.UiBuilder.createSignBackground(e);d.layer.add(t);var r,a,n=u.values.ui.screenCenterX,o=30;switch(t=e.add.image(n,o,u.assetKey.png["ui/logo"]).setOrigin(.485,0),d.layer.add(t),d.data.state){case"start":r=u.assetKey.png["ui/messagePress"],a=u.assetKey.png["ui/buttonPlay"];break;case"gameOver":r=u.assetKey.png["ui/messageGameOver"],a=u.assetKey.png["ui/buttonReplay"];break;case"atHome":case"highScore":r=u.assetKey.png["ui/messageHighScore"],a=u.assetKey.png["ui/buttonReplay"];var s=u.values.ui.buttonOffsetX;o=240,t=e.add.image(s,o,u.assetKey.png["ui/star"]).setOrigin(1,.5),d.layer.add(t),s=u.app.size.x-u.values.ui.buttonOffsetX,t=e.add.image(s,o,u.assetKey.png["ui/star"]).setOrigin(0,.5),d.layer.add(t)}var f=270;if(o=f,"atHome"!==d.data.state)t=e.add.image(n,o,r).setOrigin(.5,1),d.layer.add(t);else{var v=e.add.text(n,o,"".concat(c.Settings.getString("playerName")," Made It Home!"),i(i({},u.textStyles.playerName),{fontSize:"45px",strokeThickness:3})).setOrigin(.5,1);d.layer.add(v)}o=f+10,t=e.add.image(n,o,a).setOrigin(.5,0),d.navObjects.set("play",l.UiBuilder.makeButton({image:t,onPress:function(){return p(e)},onHover:function(e){return l.KeyboardNavigator.highlightButton({sceneId:d.sceneId,isOver:e,button:"play",navObjects:d.navObjects})}})),d.layer.add(t),"start"!==d.data.state&&function(e){var t=u.values.ui.screenCenterX,r=460,a=e.add.image(t,r,u.assetKey.png["ui/scoreBackground"]).setOrigin(.5);d.layer.add(a);var n=e.add.graphics();n.fillGradientStyle(5939645,5939645,3967429,3967429,1),d.layer.add(n);var i=e.add.text(t,r,"",u.textStyles.normal).setOrigin(.5);d.layer.add(i);var o=function(e){var t=2+337*e/100;n.fillRect(336,443,t,33),i.setText("".concat(Math.round(e),"% Complete"))};e.tweens.addCounter({from:0,to:d.data.completed,duration:1e3,onUpdate:function(e){return o(e.getValue())},onComplete:function(e){return o(e.getValue())}}),a=e.add.image(t,r,u.assetKey.png["ui/scoreForeground"]).setOrigin(.5),d.layer.add(a),t=302,r-=3,a=e.add.image(t,r,u.assetKey.png["ui/medal"]).setOrigin(.5),d.layer.add(a)}(e),o=570,t=e.add.image(n,o,u.assetKey.png["ui/messagePlayer"]).setOrigin(.5,1),d.layer.add(t),o=u.values.ui.navButtonY;var b=e.add.text(n,o-12,c.Settings.getString("playerName"),u.textStyles.playerName).setOrigin(.5,1);d.layer.add(b),n=u.values.ui.buttonOffsetX,t=e.add.image(n,o,u.assetKey.png["ui/buttonSettings"]).setOrigin(.5),d.navObjects.set("settings",l.UiBuilder.makeButton({image:t,onPress:function(){return y(e)},onHover:function(e){return l.KeyboardNavigator.highlightButton({sceneId:d.sceneId,isOver:e,button:"settings",navObjects:d.navObjects})}})),d.layer.add(t),n=u.app.size.x-u.values.ui.buttonOffsetX,t=e.add.image(n,o,u.assetKey.png["ui/buttonStats"]).setOrigin(.5),d.navObjects.set("stats",l.UiBuilder.makeButton({image:t,onPress:function(){return g(e)},onHover:function(e){return l.KeyboardNavigator.highlightButton({sceneId:d.sceneId,isOver:e,button:"stats",navObjects:d.navObjects})}})),d.layer.add(t)}(e),l.KeyboardNavigator.create(e),l.KeyboardNavigator.resetCurrentState("title"),e.tweens.add({targets:d.layer,alpha:1,duration:u.values.ui.fadeDuration})},t.prototype.update=function(e,t){!function(e){if(l.KeyboardNavigator.updateButtonStates({sceneId:d.sceneId,navObjects:d.navObjects}))return;switch(l.KeyboardNavigator.getActivatedButton(d.sceneId)){case"play":p(e);break;case"settings":y(e);break;case"stats":g(e)}}(this)},t}(s.default.Scene);function p(e){e.scene.stop(u.scenes.title),d.layer.destroy(),e.scene.get(u.scenes.gameScreen).startPlay()}function y(e){e.scene.stop(),e.scene.run(u.scenes.settings)}function g(e){e.scene.stop(),e.scene.run(u.scenes.stats)}t.TitleScreen=f},542:function(e,t,r){var a=this&&this.__createBinding||(Object.create?function(e,t,r,a){void 0===a&&(a=r),Object.defineProperty(e,a,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,a){void 0===a&&(a=r),e[a]=t[r]}),n=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||a(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),n(r(925),t),n(r(471),t),n(r(554),t),n(r(620),t),n(r(2),t)},483:function(e,t,r){var a=this&&this.__assign||function(){return a=Object.assign||function(e){for(var t,r=1,a=arguments.length;r<a;r++)for(var n in t=arguments[r])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e},a.apply(this,arguments)},n=this&&this.__awaiter||function(e,t,r,a){return new(r||(r=Promise))((function(n,i){function o(e){try{l(a.next(e))}catch(e){i(e)}}function s(e){try{l(a.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?n(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(o,s)}l((a=a.apply(e,t||[])).next())}))},i=this&&this.__generator||function(e,t){var r,a,n,i,o={label:0,sent:function(){if(1&n[0])throw n[1];return n[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;o;)try{if(r=1,a&&(n=2&i[0]?a.return:i[0]?a.throw||((n=a.return)&&n.call(a),0):a.next)&&!(n=n.call(a,i[1])).done)return n;switch(a=0,n&&(i=[2&i[0],n.value]),i[0]){case 0:case 1:n=i;break;case 4:return o.label++,{value:i[1],done:!1};case 5:o.label++,a=i[1],i=[0];continue;case 7:i=o.ops.pop(),o.trys.pop();continue;default:if(!(n=o.trys,(n=n.length>0&&n[n.length-1])||6!==i[0]&&2!==i[0])){o=0;continue}if(3===i[0]&&(!n||i[1]>n[0]&&i[1]<n[3])){o.label=i[1];break}if(6===i[0]&&o.label<n[1]){o.label=n[1],n=i;break}if(n&&o.label<n[2]){o.label=n[2],o.ops.push(i);break}n[2]&&o.ops.pop(),o.trys.pop();continue}i=t.call(e,o)}catch(e){i=[6,e],a=0}finally{r=n=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},o=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],a=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&a>=e.length&&(e=void 0),{value:e&&e[a++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(t,"__esModule",{value:!0}),t.setLeader=t.getLeaders=t.generateRandomName=t.setString=t.getString=t.setValue=t.getValue=t.set=t.get=t.initializeAsync=void 0;var s=r(20).Constants.get(),l={playerName:f()},c={city:"",country:"",ip:"",loc:"",region:""},u={bool:a({},{autoScale:!1,enableSounds:!0}),leaders:[],num:a({},{highScore:0}),str:a({},l),userInfo:a({},c)};function d(){var e=JSON.stringify(u);localStorage.setItem("".concat(s.app.title,":").concat(s.storage.settings),e)}function f(){var e=Math.floor(9999*Math.random()),t="".concat(e).padStart(4,"0");return"p".concat(t)}t.initializeAsync=function(){return n(this,void 0,void 0,(function(){var e,t,r,n,l,f,p,y,g,v,b,h,m,S,O,x,w,_,k,j,N,K,P,C,B,I;return i(this,(function(i){switch(i.label){case 0:e={};try{(m=localStorage.getItem("".concat(s.app.title,":").concat(s.storage.settings)))&&(e=JSON.parse(m))}catch(e){console.error(e)}t=!1;try{for(r=o(Object.keys(u.bool)),n=r.next();!n.done;n=r.next())x=n.value,l=e.bool,t||void 0!==l&&void 0!==l[x]||(t=!0),l&&void 0!==l[x]&&(u.bool[x]=l[x])}catch(e){k={error:e}}finally{try{n&&!n.done&&(j=r.return)&&j.call(r)}finally{if(k)throw k.error}}try{for(f=o(Object.keys(u.num)),p=f.next();!p.done;p=f.next())x=p.value,y=e.num,t||void 0!==y&&void 0!==y[x]||(t=!0),y&&void 0!==y[x]&&(u.num[x]=y[x])}catch(e){N={error:e}}finally{try{p&&!p.done&&(K=f.return)&&K.call(f)}finally{if(N)throw N.error}}try{for(g=o(Object.keys(u.str)),v=g.next();!v.done;v=g.next())x=v.value,b=e.str,t||void 0!==b&&void 0!==b[x]||(t=!0),b&&void 0!==b[x]&&(u.str[x]=b[x])}catch(e){P={error:e}}finally{try{v&&!v.done&&(C=g.return)&&C.call(g)}finally{if(P)throw P.error}}h=e.leaders,t||void 0!==h||(t=!0),u.leaders=void 0!==h&&h.length>0?h:function(){for(var e=[],t=12;t>=1;--t)e.push(a(a({},u.userInfo),{date:Date.now(),playerName:t%2==0?"Flip":"Flap",score:80+10*t}));return e}(),i.label=1;case 1:return i.trys.push([1,4,,5]),[4,fetch("https://ipinfo.io/json")];case 2:return[4,i.sent().json()];case 3:m=i.sent();try{for(S=o(Object.keys(c)),O=S.next();!O.done;O=S.next())x=O.value,(w=m[x])?u.userInfo[x]=w:console.error("missing ".concat(x))}catch(e){B={error:e}}finally{try{O&&!O.done&&(I=S.return)&&I.call(S)}finally{if(B)throw B.error}}return[3,5];case 4:return _=i.sent(),console.error(_),[3,5];case 5:return t&&d(),[2]}}))}))},t.get=function(e){return u.bool[e]},t.set=function(e){u.bool[e.key]=e.value,d()},t.getValue=function(e){return u.num[e]},t.setValue=function(e){u.num[e.key]=e.value,d()},t.getString=function(e){return u.str[e]},t.setString=function(e){u.str[e.key]=e.str,d()},t.generateRandomName=f,t.getLeaders=function(){return u.leaders},t.setLeader=function(e){e<u.leaders[u.leaders.length-1].score||(u.leaders.push(a(a({},u.userInfo),{date:Date.now(),playerName:u.str.playerName,score:e})),u.leaders.sort((function(e,t){return e.score>t.score?-1:e.score<t.score?1:e.date>t.date?-1:1})),u.leaders=u.leaders.slice(0,12),d())}},627:function(e,t,r){var a=this&&this.__createBinding||(Object.create?function(e,t,r,a){void 0===a&&(a=r),Object.defineProperty(e,a,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,a){void 0===a&&(a=r),e[a]=t[r]}),n=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&a(t,e,r);return n(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.Settings=void 0,t.Settings=i(r(483))}},r={};function a(e){var n=r[e];if(void 0!==n)return n.exports;var i=r[e]={id:e,exports:{}};return t[e].call(i.exports,i,i.exports,a),i.exports}a.m=t,e=[],a.O=(t,r,n,i)=>{if(!r){var o=1/0;for(u=0;u<e.length;u++){for(var[r,n,i]=e[u],s=!0,l=0;l<r.length;l++)(!1&i||o>=i)&&Object.keys(a.O).every((e=>a.O[e](r[l])))?r.splice(l--,1):(s=!1,i<o&&(o=i));if(s){e.splice(u--,1);var c=n();void 0!==c&&(t=c)}}return t}i=i||0;for(var u=e.length;u>0&&e[u-1][2]>i;u--)e[u]=e[u-1];e[u]=[r,n,i]},a.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return a.d(t,{a:t}),t},a.d=(e,t)=>{for(var r in t)a.o(t,r)&&!a.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},a.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),a.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),a.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{var e;a.g.importScripts&&(e=a.g.location+"");var t=a.g.document;if(!e&&t&&(t.currentScript&&(e=t.currentScript.src),!e)){var r=t.getElementsByTagName("script");r.length&&(e=r[r.length-1].src)}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),a.p=e})(),(()=>{a.b=document.baseURI||self.location.href;var e={143:0};a.O.j=t=>0===e[t];var t=(t,r)=>{var n,i,[o,s,l]=r,c=0;if(o.some((t=>0!==e[t]))){for(n in s)a.o(s,n)&&(a.m[n]=s[n]);if(l)var u=l(a)}for(t&&t(r);c<o.length;c++)i=o[c],a.o(e,i)&&e[i]&&e[i][0](),e[o[c]]=0;return a.O(u)},r=self.webpackChunkflip_flap=self.webpackChunkflip_flap||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))})();var n=a.O(void 0,[736],(()=>a(592)));n=a.O(n)})();