(()=>{"use strict";var e,t={592:function(e,t,r){var a=this&&this.__awaiter||function(e,t,r,a){return new(r||(r=Promise))((function(n,o){function i(e){try{l(a.next(e))}catch(e){o(e)}}function s(e){try{l(a.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?n(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(i,s)}l((a=a.apply(e,t||[])).next())}))},n=this&&this.__generator||function(e,t){var r,a,n,o,i={label:0,sent:function(){if(1&n[0])throw n[1];return n[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;i;)try{if(r=1,a&&(n=2&o[0]?a.return:o[0]?a.throw||((n=a.return)&&n.call(a),0):a.next)&&!(n=n.call(a,o[1])).done)return n;switch(a=0,n&&(o=[2&o[0],n.value]),o[0]){case 0:case 1:n=o;break;case 4:return i.label++,{value:o[1],done:!1};case 5:i.label++,a=o[1],o=[0];continue;case 7:o=i.ops.pop(),i.trys.pop();continue;default:if(!(n=i.trys,(n=n.length>0&&n[n.length-1])||6!==o[0]&&2!==o[0])){i=0;continue}if(3===o[0]&&(!n||o[1]>n[0]&&o[1]<n[3])){i.label=o[1];break}if(6===o[0]&&i.label<n[1]){i.label=n[1],n=o;break}if(n&&i.label<n[2]){i.label=n[2],i.ops.push(o);break}n[2]&&i.ops.pop(),i.trys.pop();continue}o=t.call(e,i)}catch(e){o=[6,e],a=0}finally{r=n=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),r(567);var i=o(r(260)),s=r(20),l=r(542),c=r(627),u=s.Constants.get();a(void 0,void 0,void 0,(function(){var e;return n(this,(function(t){switch(t.label){case 0:return document.title="".concat(u.app.title," v").concat(u.app.version),c.Firebase.initialize(),[4,c.Settings.initializeAsync()];case 1:return t.sent(),e={type:i.default.AUTO,width:u.app.size.x,height:u.app.size.y,dom:{createContainer:!0},parent:"game",physics:{default:"arcade",arcade:{debug:u.app.isDebugMode}},scale:{mode:i.default.Scale.FIT,autoCenter:i.default.Scale.CENTER_BOTH,min:{width:.25*u.app.size.x,height:.25*u.app.size.y}},scene:[l.PreLoader,l.GameScreen,l.TitleScreen,l.SettingsScreen,l.StatsScreen]},[2,new i.default.Game(e)]}}))}))},773:function(e,t,r){var a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.getDateValue=t.setGameSize=t.loadSvg=t.loadSprite=t.loadPng=t.loadHtml=t.loadAudio=t.createSolidColorBackground=void 0;var n=a(r(260)),o=r(20).Constants.get(),i={daysPerMonth:new Map([[1,31],[2,29],[3,31],[4,30],[5,31],[6,30],[7,31],[8,31],[9,30],[10,31],[11,30],[12,31]])};t.createSolidColorBackground=function(e){return e.graphics.fillStyle(e.color).fillRect(0,0,o.app.size.x,o.app.size.y)},t.loadAudio=function(e){var t=o.assetKey.audio[e.audioId];e.scene.load.audio(t,["".concat(t,".ogg"),"".concat(t,".mp3")])},t.loadHtml=function(e){var t=o.assetKey.html[e.htmlId];e.scene.load.html(t,"".concat(t,".html"))},t.loadPng=function(e){var t=o.assetKey.png[e.pngId];e.scene.load.image(t,"".concat(t,".png"))},t.loadSprite=function(e){var t=o.assetKey.sprite[e.spriteId];e.scene.load.spritesheet(t,"".concat(t,".png"),e.frameConfig)},t.loadSvg=function(e){var t="".concat(o.assetKey.svg[e.svgId]);e.scene.load.svg(t,"".concat(t,".svg"),e.size)},t.setGameSize=function(e){e.scene.game.scale.scaleMode=e.autoScale?n.default.Scale.FIT:n.default.Scale.NONE,e.autoScale||e.scene.game.scale.setZoom(1),e.scene.game.scale.refresh()},t.getDateValue=function(e){var t,r=e.split("_");if(3===r.length)try{var a=new Date(Date.now()),n=a.getUTCFullYear(),o=a.getUTCMonth()+1,s=a.getUTCDate(),l=Number.parseInt(r[0],10);if(l<2022||l>n)throw new RangeError("Invalid year in dateString=".concat(e));var c=Number.parseInt(r[1],10);if(c<1||c>12||l===n&&c>o)throw new RangeError("Invalid month in dateString=".concat(e));var u=Number.parseInt(r[2],10);if(u<1||u>(null!==(t=i.daysPerMonth.get(c))&&void 0!==t?t:0)||l===n&&c===o&&u>s)throw new RangeError("Invalid day in dateString=".concat(e));return new Date(l,c-1,u).getTime()}catch(e){console.error(e)}return Date.now()}},595:function(e,t,r){var a=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],a=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&a>=e.length&&(e=void 0),{value:e&&e[a++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(t,"__esModule",{value:!0}),t.get=void 0;var n=r(80),o=Object.freeze({app:{constantsInitialized:!1,isDebugMode:void 0,padding:10,size:Object.freeze({x:1024,y:768}),title:"Flip Flap",version:"".concat(n.RELEASES.CURRENT.major,".").concat(n.RELEASES.CURRENT.minor)},assetKey:Object.freeze({audio:{bgMusic:"",congrats:"",finished:"",flap:"",hitObject:"",hitWall:"",hover:"",scream:"",takeOff:""},html:{settings:"",stats:""},png:{background:"",cloud1:"",cloud2:"",cloud3:"",ends:"",floorCeiling:"",metalBig:"",metalBox1:"",metalBox2:"",metalSmall:"",nest:"",tree:"","ui/banner":"","ui/buttonFullScreen":"","ui/buttonHome":"","ui/buttonPlay":"","ui/buttonReplay":"","ui/buttonSettings":"","ui/buttonSounds":"","ui/buttonStats":"","ui/global":"","ui/leaders":"","ui/local":"","ui/logo":"","ui/medal":"","ui/messageFullScreen":"","ui/messageGameOver":"","ui/messageHighScore":"","ui/messagePlayer":"","ui/messagePress":"","ui/messageSounds":"","ui/off":"","ui/playerName":"","ui/scoreBackground":"","ui/scoreForeground":"","ui/settings":"","ui/signBackground":"","ui/star":"","ui/stats":"","ui/switch":"",wall:""},sprite:{bird:"",eggCrack:""},svg:{dummy:""}}),scenes:{gameScreen:"",settings:"",stats:"",title:""},storage:{settings:""},textStyles:{},values:{edgeOffset:25,maxNumLeaders:12,tintColor:15724543,treeOffset:30,ui:{buttonOffsetX:300,fadeDuration:200,navButtonY:620,screenCenterX:512,signBackgroundY:120}}});function i(e){var t,r;try{for(var n=a(Object.keys(e)),o=n.next();!o.done;o=n.next()){var i=o.value;e[i]=i}}catch(e){t={error:e}}finally{try{o&&!o.done&&(r=n.return)&&r.call(n)}finally{if(t)throw t.error}}Object.freeze(e)}t.get=function(){var e;return o.app.constantsInitialized||(!function(){var e,t,r,n;try{for(var i=a(Object.keys(o.assetKey)),s=i.next();!s.done;s=i.next()){var l=s.value,c=o.assetKey[l];try{for(var u=(r=void 0,a(Object.keys(c))),d=u.next();!d.done;d=u.next()){var f=d.value;c[f]="assets/".concat(l,"/").concat(f)}}catch(e){r={error:e}}finally{try{d&&!d.done&&(n=u.return)&&n.call(u)}finally{if(r)throw r.error}}Object.freeze(c)}}catch(t){e={error:t}}finally{try{s&&!s.done&&(t=i.return)&&t.call(i)}finally{if(e)throw e.error}}Object.freeze(o.assetKey)}(),i(o.scenes),i(o.storage),e={copyright:{fontFamily:"Sans-serif",fontSize:"15px",color:"#fff",stroke:"#000",strokeThickness:2.2},normal:{fontFamily:"Sans-serif",fontSize:"24px",color:"#fff",stroke:"#000",strokeThickness:2.2},playerName:{fontFamily:"Sans-serif",fontSize:"35px",color:"#fff",stroke:"#000",strokeThickness:2.2},score:{fontSize:"25px",color:"#333"},bestScore:{fontSize:"20px",color:"#333"}},Object.assign(o.textStyles,e),Object.freeze(o.textStyles),o.app.constantsInitialized=!0),void 0===o.app.isDebugMode&&(o.app.isDebugMode=document.body.classList.contains("debugMode"),Object.freeze(o.app)),o}},668:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},255:function(e,t,r){var a=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],a=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&a>=e.length&&(e=void 0),{value:e&&e[a++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},n=this&&this.__read||function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var a,n,o=r.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(a=o.next()).done;)i.push(a.value)}catch(e){n={error:e}}finally{try{a&&!a.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}return i};Object.defineProperty(t,"__esModule",{value:!0}),t.resetCurrentState=t.getCurrentState=t.getActivatedButton=t.highlightButton=t.updateButtonStates=t.create=void 0;var o=r(20),i=o.Constants.get(),s={currentState:{settings:"_NONE_",stats:"_NONE_",title:"_NONE_"},keys:{cursor:void 0,enter:void 0,escape:void 0},states:{settings:new Map([["_NONE_",{down:"home",left:"home",right:"sound",up:"sound"}],["home",{down:void 0,left:void 0,right:"name",up:"name"}],["name",{down:"home",left:"home",right:"sound",up:"sound"}],["sound",{down:"name",left:"name",right:"fullScreen",up:"fullScreen"}],["fullScreen",{down:"sound",left:"sound",right:void 0,up:void 0}]]),stats:new Map([["_NONE_",{down:"home",left:"home",right:"switch",up:"switch"}],["home",{down:void 0,left:void 0,right:"switch",up:"switch"}],["switch",{down:"home",left:"home",right:void 0,up:void 0}]]),title:new Map([["_NONE_",{down:"settings",left:"settings",right:"stats",up:"play"}],["play",{down:"settings",left:"settings",right:"stats",up:void 0}],["settings",{down:void 0,left:void 0,right:"stats",up:"play"}],["stats",{down:void 0,left:"settings",right:void 0,up:"play"}]])}};function l(e){var t,r=e.sceneId,a=e.moveDirection,n=s.currentState[r];switch(r){case"settings":case"stats":case"title":t=c({currentState:n,states:s.states[r],moveDirection:a})}return t}function c(e){var t=e.currentState,r=e.states,a=e.moveDirection,n=r.get(t);if(void 0!==n)return n[a];console.error("missing transition map for",t)}function u(e){var t,r,o=e.sceneId,i=e.isOver,l=e.button,c=e.navObjects,u=i?l:"_NONE_";try{for(var f=a(c.entries()),p=f.next();!p.done;p=f.next()){var y=n(p.value,2),g=y[0],v=y[1];d(g===u?{image:v,isOver:!0}:{image:v,isOver:!1})}}catch(e){t={error:e}}finally{try{p&&!p.done&&(r=f.return)&&r.call(f)}finally{if(t)throw t.error}}s.currentState[o]=i?l:"_NONE_"}function d(e){var t=e.image;e.isOver?(t.setTint(i.values.tintColor),o.SoundEffects.play("hover")):t.clearTint()}function f(e){return s.currentState[e]}t.create=function(e){s.keys={cursor:e.input.keyboard.createCursorKeys(),enter:e.input.keyboard.addKey("Enter"),escape:e.input.keyboard.addKey("Esc")}},t.updateButtonStates=function(e){var t,r=e.sceneId,a=e.navObjects;return Phaser.Input.Keyboard.JustUp(s.keys.cursor.down)?t=l({sceneId:r,moveDirection:"down"}):Phaser.Input.Keyboard.JustUp(s.keys.cursor.left)?t=l({sceneId:r,moveDirection:"left"}):Phaser.Input.Keyboard.JustUp(s.keys.cursor.right)?t=l({sceneId:r,moveDirection:"right"}):Phaser.Input.Keyboard.JustUp(s.keys.cursor.up)&&(t=l({sceneId:r,moveDirection:"up"})),t&&u({sceneId:r,isOver:"_NONE_"!==t,button:"_NONE_"!==t?t:"home",navObjects:a}),void 0!==t},t.highlightButton=u,t.getActivatedButton=function(e){return Phaser.Input.Keyboard.JustUp(s.keys.cursor.space)||Phaser.Input.Keyboard.JustUp(s.keys.enter)?f(e):"settings"!==e&&"stats"!==e||!Phaser.Input.Keyboard.JustUp(s.keys.escape)?void 0:"home"},t.getCurrentState=f,t.resetCurrentState=function(e){s.currentState[e]="_NONE_"}},383:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.landingHome=t.restart=t.hasBirdMoved=t.makeBirdFall=t.update=t.flap=t.takeOff=t.getHeight=t.create=void 0;var a=r(20),n=a.Constants.get(),o={allowSound:!0,bird:void 0,flapVelocityY:-300,gravityY:700,hit:void 0,lastPosition:{x:0,y:0},lastTime:-99,offset:{backwardX:10,forwardX:24,y:28},speedX:250,startPosition:{x:80,y:325}};function i(e){o.hit=e,o.bird.body.velocity.y=500}t.create=function(e){return o.bird=e.physics.add.sprite(o.startPosition.x,o.startPosition.y,n.assetKey.sprite.bird).setOrigin(.5).setBodySize(50,35).setOffset(o.offset.forwardX,o.offset.y).play(a.Sprites.getAnimationKeys().bird.idle),o.bird},t.getHeight=function(){return o.bird.body.height},t.takeOff=function(){o.bird.play(a.Sprites.getAnimationKeys().bird.fly),o.bird.body.gravity.y=o.gravityY,o.bird.body.velocity.x=o.speedX,o.lastPosition.x=o.bird.x,o.allowSound=!0,a.SoundEffects.play("takeOff")},t.flap=function(){o.bird.body.velocity.y=o.flapVelocityY,a.SoundEffects.play("flap")},t.update=function(e){var t={distanceTravelled:0,isGameOver:!1,isFlying:!0,isReversed:!1};o.bird.body.x+o.bird.body.width>=n.app.size.x-n.values.edgeOffset&&o.bird.body.velocity.x>0?(o.bird.body.velocity.x=-o.speedX,o.bird.setOffset(o.offset.backwardX,o.offset.y),o.bird.setFlipX(!0),t.isReversed=!0):o.bird.body.x<=n.values.edgeOffset&&o.bird.body.velocity.x<0&&(o.bird.body.velocity.x=o.speedX,o.bird.setOffset(o.offset.forwardX,o.offset.y),o.bird.setFlipX(!1),t.isReversed=!0);var r,s,l=!1;if(Math.abs(o.bird.body.velocity.x)<1&&o.bird.body.gravity.y>0||(r=.5*n.values.edgeOffset,(s=o.bird.body.y<=r)&&(o.hit="ceiling"),s)){l=!0,t.isFlying=!1;var c=void 0;switch(o.hit){case"ceiling":c="scream";break;case"object":c="hitObject";break;case"wall":c="hitWall"}c&&o.allowSound&&(a.SoundEffects.play(c),e.time.delayedCall(800,(function(){o.allowSound=!1}))),i()}else t.distanceTravelled=Math.abs(o.bird.x-o.lastPosition.x),o.lastPosition.x=o.bird.x,o.hit=void 0;return o.bird.body.y+o.bird.body.height>=n.app.size.y-n.values.edgeOffset&&(l=!0,o.bird.body.velocity.y=0,o.bird.body.gravity.y=0,t.isGameOver=!0,o.allowSound&&a.SoundEffects.play("scream")),l&&(o.bird.setTint(12303291),o.bird.body.velocity.x=0,o.bird.play(a.Sprites.getAnimationKeys().bird.dead,!0)),t},t.makeBirdFall=i,t.hasBirdMoved=function(){var e=Math.abs(o.bird.y-o.lastPosition.y)>0;return o.lastPosition.y=o.bird.y,e},t.restart=function(){Object.assign(o.bird,o.startPosition),o.bird.body.velocity.x=0,o.bird.body.velocity.y=0,o.bird.body.gravity.y=0,o.bird.clearTint(),o.bird.play(a.Sprites.getAnimationKeys().bird.idle),o.bird.setFlipX(!1),o.bird.setOffset(o.offset.forwardX,o.offset.y)},t.landingHome=function(e){o.bird.setFlipX(!0),o.bird.body.velocity.x=0,o.bird.body.velocity.y=0,o.bird.body.gravity.y=0;var t=2500*Math.abs(467-o.bird.y)/467;return e.tweens.add({targets:o.bird,x:945,y:467,ease:"Sine.easeOut",duration:t,onComplete:function(){o.bird.play(a.Sprites.getAnimationKeys().bird.idle)}}),t}},794:function(e,t,r){var a=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],a=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&a>=e.length&&(e=void 0),{value:e&&e[a++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},n=this&&this.__read||function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var a,n,o=r.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(a=o.next()).done;)i.push(a.value)}catch(e){n={error:e}}finally{try{a&&!a.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}return i};Object.defineProperty(t,"__esModule",{value:!0}),t.enable=t.resume=t.pause=t.stop=t.playConfig=t.play=t.create=void 0;var o=r(20),i=r(627),s=o.Constants.get(),l={isEnabled:!0,audioAsset:{}};function c(e){var t=l.audioAsset[e];return t||console.error("".concat(e," has not been loaded in a scene")),t}function u(e){if(l.isEnabled){var t=c(e.audioId);void 0!==t&&t.play(e.config)}}function d(e){l.isEnabled=e}t.create=function(e){var t,r;try{for(var o=a(Object.entries(s.assetKey.audio)),c=o.next();!c.done;c=o.next()){var u=n(c.value,2),f=u[0],p=u[1],y=void 0;"bgMusic"===f&&(y={loop:!0}),l.audioAsset[f]=e.sound.add(p,y)}}catch(e){t={error:e}}finally{try{c&&!c.done&&(r=o.return)&&r.call(o)}finally{if(t)throw t.error}}d(i.Settings.get("enableSounds"))},t.play=function(e){u({audioId:e})},t.playConfig=function(e){u(e)},t.stop=function(e){var t=c(e);void 0!==t&&t.isPlaying&&t.stop()},t.pause=function(e){var t=c(e);void 0!==t&&!t.isPaused&&t.isPlaying&&t.pause()},t.resume=function(e){var t=c(e);void 0!==t&&l.isEnabled&&!t.isPlaying&&(t.isPaused?t.resume():t.play())},t.enable=d},487:function(e,t,r){var a=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],a=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&a>=e.length&&(e=void 0),{value:e&&e[a++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(t,"__esModule",{value:!0}),t.create=t.preload=t.getAnimationKeys=void 0;var n=r(20),o=n.Constants.get(),i={animations:{bird:{dead:"",fly:"",idle:""},eggCrack:{hatch:""}}};t.getAnimationKeys=function(){return i.animations},t.preload=function(e){n.Common.loadSprite({scene:e,spriteId:"bird",frameConfig:{frameWidth:82,frameHeight:77,endFrame:73}}),n.Common.loadSprite({scene:e,spriteId:"eggCrack",frameConfig:{frameWidth:76,frameHeight:46,endFrame:39}})},t.create=function(e){!function(){var e,t,r,n;try{for(var o=a(Object.keys(i.animations)),s=o.next();!s.done;s=o.next()){var l=s.value,c=i.animations[l];try{for(var u=(r=void 0,a(Object.keys(c))),d=u.next();!d.done;d=u.next()){var f=d.value;c[f]="".concat(l,"_").concat(f)}}catch(e){r={error:e}}finally{try{d&&!d.done&&(n=u.return)&&n.call(u)}finally{if(r)throw r.error}}Object.freeze(c)}}catch(t){e={error:t}}finally{try{s&&!s.done&&(t=o.return)&&t.call(o)}finally{if(e)throw e.error}}Object.freeze(i.animations)}(),e.anims.create({key:i.animations.bird.dead,frames:e.anims.generateFrameNumbers(o.assetKey.sprite.bird,{start:64,end:73}),frameRate:10,repeat:-1}),e.anims.create({key:i.animations.bird.fly,frames:e.anims.generateFrameNumbers(o.assetKey.sprite.bird,{start:0,end:29}),frameRate:20,repeat:-1}),e.anims.create({key:i.animations.bird.idle,frames:e.anims.generateFrameNumbers(o.assetKey.sprite.bird,{start:32,end:61}),frameRate:10,repeat:-1}),e.anims.create({key:i.animations.eggCrack.hatch,frames:e.anims.generateFrameNumbers(o.assetKey.sprite.eggCrack,{start:0,end:39}),frameRate:10,repeat:0})}},612:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.makeButton=t.createSignBackground=void 0;var a=r(20).Constants.get();t.createSignBackground=function(e){var t=a.values.ui.screenCenterX,r=a.values.ui.signBackgroundY;return e.add.image(t,r,a.assetKey.png["ui/signBackground"]).setOrigin(.5,0)},t.makeButton=function(e){var t=e.image,r=e.onPress,a=e.onHover;return t.setInteractive().on("pointerup",(function(){return r()})).on("pointerover",(function(){return a(!0)})).on("pointerout",(function(){return a(!1)}))}},80:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.RELEASES=void 0,t.RELEASES=Object.freeze({FIRST:{major:2022,minor:1},V2022_2:{major:2022,minor:2},V2022_3:{major:2022,minor:3},CURRENT:{major:2022,minor:3}})},20:function(e,t,r){var a=this&&this.__createBinding||(Object.create?function(e,t,r,a){void 0===a&&(a=r),Object.defineProperty(e,a,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,a){void 0===a&&(a=r),e[a]=t[r]}),n=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||a(t,e,r)},i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&a(t,e,r);return n(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.VersionHistory=t.UiBuilder=t.Sprites=t.SoundEffects=t.Player=t.KeyboardNavigator=t.Common=t.Constants=void 0,o(r(668),t),t.Constants=i(r(595)),t.Common=i(r(773)),t.KeyboardNavigator=i(r(255)),t.Player=i(r(383)),t.SoundEffects=i(r(794)),t.Sprites=i(r(487)),t.UiBuilder=i(r(612)),t.VersionHistory=i(r(80))},925:function(e,t,r){var a,n=this&&this.__extends||(a=function(e,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},a(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),o=this&&this.__assign||function(){return o=Object.assign||function(e){for(var t,r=1,a=arguments.length;r<a;r++)for(var n in t=arguments[r])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e},o.apply(this,arguments)},i=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],a=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&a>=e.length&&(e=void 0),{value:e&&e[a++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.onAction=t.GameScreen=void 0;var l=s(r(260)),c=r(20),u=r(627),d=c.Constants.get();function f(){return{gameState:"idle",reversals:d.app.isDebugMode?2:0,stats:{numFlaps:0,numSlides:0,distanceTravelled:0}}}var p=o(o({},f()),{backgroundGraphics:void 0,depth:{edgeWalls:1,eggs:3,nest:5,player:4,tree:2,ui:10,walls:2},difficulty:[],eggs:void 0,header:{best:{prefix:"Best: ",text:void 0},score:{prefix:"Score: ",text:void 0}},keyboard:{isActive:!1,enter:void 0,space:void 0,up:void 0},nest:void 0,numClouds:4,objects:{onLeft:{group:void 0,collider:void 0},onRight:{group:void 0,collider:void 0}},occupied:{grid:[],max:{x:4,y:10}},player:void 0,tree:{homeCollider:void 0,image:void 0,trunkCollider:void 0},wall:{gap:{factor:{min:2.5,randomDelta:.5,startValue:5.5,value:0},size:0},group:void 0}}),y=function(e){function t(){return e.call(this,d.scenes.gameScreen)||this}return n(t,e),t.prototype.preload=function(){!function(e){u.Settings.get("autoScale")||(e.game.scale.scaleMode=l.default.Scale.NONE,e.game.scale.setZoom(1),e.game.scale.refresh());p.difficulty.push({big:0,boxStack:!1,box:0,small:2},{big:0,boxStack:!1,box:0,small:3},{big:0,boxStack:!1,box:1,small:2},{big:0,boxStack:!1,box:1,small:3},{big:0,boxStack:!1,box:2,small:2},{big:0,boxStack:!0,box:2,small:2},{big:0,boxStack:!0,box:2,small:3},{big:0,boxStack:!0,box:3,small:2},{big:1,boxStack:!1,box:2,small:1},{big:2,boxStack:!0,box:2,small:0},{big:2,boxStack:!0,box:2,small:2},{big:1,boxStack:!1,box:2,small:4},{big:1,boxStack:!0,box:4,small:1})}(this)},t.prototype.create=function(){!function(e){(function(e){p.backgroundGraphics=e.add.graphics();var t=.5*d.app.size.y;p.backgroundGraphics.fillStyle(13694199).fillRect(0,0,d.app.size.x,t),p.backgroundGraphics.fillStyle(12642540).fillRect(0,t,d.app.size.x,t),e.add.image(0,t,d.assetKey.png.background).setOrigin(0,.5)})(e),function(e){var t,r;try{for(var a=i(Array.from({length:p.numClouds}).map((function(e,t){return t}))),n=a.next();!n.done;n=a.next()){g({scene:e,initialCloudIndex:n.value})}}catch(e){t={error:e}}finally{try{n&&!n.done&&(r=a.return)&&r.call(a)}finally{if(t)throw t.error}}}(e),p.player=c.Player.create(e),p.player.setDepth(p.depth.player),function(e){p.tree.image=e.add.image(d.values.treeOffset,d.app.size.y-d.values.edgeOffset,d.assetKey.png.tree).setOrigin(.5,1).setDepth(p.depth.tree);var t=50,r={x:978,y:535},a=e.add.rectangle(r.x,r.y,t,215).setOrigin(0);p.tree.trunkCollider=e.physics.add.collider(p.player,e.physics.add.staticGroup(a),v),p.tree.trunkCollider.active=!1;var n=e.add.rectangle(r.x,r.y,t,d.app.size.y).setOrigin(0,1);p.tree.homeCollider=e.physics.add.collider(p.player,e.physics.add.staticGroup(n),(function(){return function(e){if("finished"===p.gameState)return;p.gameState="finished",h({scene:e,isOn:!1});var t=c.Player.landingHome(e);e.time.delayedCall(t,(function(){return p.nest.setVisible(!0)})),e.time.delayedCall(t+1e3,_,[e])}(e)})),p.tree.homeCollider.active=!1,p.eggs=e.add.sprite(983,512,d.assetKey.sprite.eggCrack).setOrigin(1).setDepth(p.depth.eggs).setVisible(!1),p.nest=e.add.image(981,510,d.assetKey.png.nest).setOrigin(1).setDepth(p.depth.nest).setVisible(!1)}(e),p.wall.group=e.physics.add.group(),function(e){var t,r,a=d.values.edgeOffset,n=[e.add.image(a,0,d.assetKey.png.ends).setOrigin(1,0),e.add.image(d.app.size.x-a,0,d.assetKey.png.ends).setOrigin(0),e.add.image(0,a,d.assetKey.png.floorCeiling).setOrigin(0,1)];try{for(var o=i(n),s=o.next();!s.done;s=o.next()){s.value.setDepth(p.depth.edgeWalls)}}catch(e){t={error:e}}finally{try{s&&!s.done&&(r=o.return)&&r.call(o)}finally{if(t)throw t.error}}var l=e.physics.add.sprite(0,d.app.size.y-a,d.assetKey.png.floorCeiling).setOrigin(0,.19).setPushable(!1).setDepth(p.depth.walls).setOffset(0,14);e.physics.add.collider(p.player,l,void 0,j)}(e),function(e){var t=5,r=d.values.edgeOffset+t,a=d.values.edgeOffset;p.header.score.text=e.add.text(r,a,"".concat(p.header.score.prefix,"0"),d.textStyles.score).setDepth(p.depth.ui),a+=p.header.score.text.height+t,p.header.best.text=e.add.text(r,a,"".concat(p.header.best.prefix).concat(u.Settings.getValue("highScore")),d.textStyles.bestScore).setDepth(p.depth.ui)}(e),function(e){var t,r,a=d.values.ui.screenCenterX,n=[e.physics.add.sprite(a,0,d.assetKey.png.wall).setOrigin(.5,1),e.physics.add.sprite(a,0,d.assetKey.png.wall).setOrigin(.5,0)];try{for(var o=i(n),s=o.next();!s.done;s=o.next()){var l=s.value;l.setPushable(!1).setDepth(p.depth.walls),p.wall.group.add(l)}}catch(e){t={error:e}}finally{try{s&&!s.done&&(r=o.return)&&r.call(o)}finally{if(t)throw t.error}}b(),m()}(e),e.physics.add.collider(p.player,p.wall.group,void 0,S),p.objects.onLeft.group=e.physics.add.group(),p.objects.onRight.group=e.physics.add.group(),p.keyboard={isActive:!1,enter:e.input.keyboard.addKey("Enter"),space:e.input.keyboard.addKey("Space"),up:e.input.keyboard.addKey("Up")};var t={state:"start",completed:0};e.scene.launch(d.scenes.title,t)}(this)},t.prototype.update=function(e,t){!function(e){p.keyboard.isActive&&(l.default.Input.Keyboard.JustDown(p.keyboard.enter)||l.default.Input.Keyboard.JustDown(p.keyboard.space)||l.default.Input.Keyboard.JustDown(p.keyboard.up))&&O();switch(p.gameState){case"flying":x((t=c.Player.update(e)).distanceTravelled),t.isGameOver?(p.gameState="dead",_(e)):t.isFlying?t.isReversed&&function(e){++p.reversals,64===p.reversals?(p.tree.image.visible=!0,p.tree.image.setX(d.app.size.x-d.values.treeOffset),p.tree.homeCollider.active=!0,p.tree.trunkCollider.active=!0,p.eggs.setVisible(!0).play(c.Sprites.getAnimationKeys().eggCrack.hatch)):p.tree.image.visible=!1;p.reversals%5==0&&b();m(),function(e){var t;if(p.reversals<3||64===p.reversals)return;var r=p.reversals%2==1,a=r?p.objects.onLeft:p.objects.onRight;null===(t=a.collider)||void 0===t||t.destroy(),a.group.clear(!0,!0),p.occupied.grid=[];for(var n=0;n<p.occupied.max.x;++n)p.occupied.grid.push(Array.from({length:p.occupied.max.y}).map((function(){return!1})));var o=Math.min(Math.floor((p.reversals+2)/5)-1,p.difficulty.length-1),i=p.difficulty[o];N({type:"big",numObjects:i.big,isStacked:!1,updateLeftSide:r,scene:e}),N({type:"box",numObjects:i.box,isStacked:i.boxStack,updateLeftSide:r,scene:e}),N({type:"small",numObjects:i.small,isStacked:!1,updateLeftSide:r,scene:e}),a.collider=e.physics.add.collider(p.player,a.group,void 0,j)}(e)}(e):p.gameState="dying";break;case"dying":var t;!(t=c.Player.update(e)).isGameOver&&c.Player.hasBirdMoved()||(p.gameState="dead",_(e))}}(this)},t.prototype.startPlay=function(){h({scene:this,isOn:!0}),O()},t.prototype.clearHighScore=function(){p.header.best.text.setText("".concat(p.header.best.prefix,"0"))},t}(l.default.Scene);function g(e){var t=e.scene,r=e.initialCloudIndex,a="";switch(l.default.Math.Between(1,3)){case 1:a=d.assetKey.png.cloud1;break;case 2:a=d.assetKey.png.cloud2;break;case 3:a=d.assetKey.png.cloud3}var n=d.app.size.x,o=l.default.Math.Between(3e4,37e3);if(void 0!==r){o=(n=(d.app.size.x-130*p.numClouds)/(p.numClouds+1)*(r+1)+130*r)/(d.app.size.x/o)}var i=l.default.Math.Between(50,.31*d.app.size.y),s=t.add.image(n,i,a).setOrigin(0);t.tweens.add({targets:s,x:-s.width,ease:"Linear",duration:o,onComplete:function(){s.destroy(),g({scene:t})}})}function v(){"dying"!==p.gameState&&(p.gameState="dying")}function h(e){p.keyboard.isActive=e.isOn,e.isOn?e.scene.input.on("pointerdown",O):e.scene.input.off("pointerdown")}function b(){var e=p.wall.gap.factor.startValue-.25*p.reversals/5;p.wall.gap.factor.value=Math.max(p.wall.gap.factor.min,e),p.wall.gap.size=l.default.Math.Between(p.wall.gap.factor.value,p.wall.gap.factor.value-p.wall.gap.factor.randomDelta)*c.Player.getHeight()}function m(){var e,t,r=c.Player.getHeight(),a=0,n=0;try{for(var o=i(p.wall.group.getChildren()),s=o.next();!s.done;s=o.next()){var u=s.value;if(u instanceof l.default.Physics.Arcade.Sprite){if(a%2==0){var f=u.y;n=0;for(var y=!1;!y;)n=l.default.Math.Between(r,d.app.size.y-r-p.wall.gap.size),y=Math.abs(f-n)>50}u.y=n,n+=p.wall.gap.size,++a}}}catch(t){e={error:t}}finally{try{s&&!s.done&&(t=o.return)&&t.call(o)}finally{if(e)throw e.error}}}function S(){"flying"===p.gameState&&(c.Player.makeBirdFall("wall"),++p.stats.numSlides)}function O(){var e=!1;switch(p.gameState){case"idle":c.Player.takeOff(),p.gameState="flying",e=!0,c.SoundEffects.play("bgMusic");break;case"flying":e=!0;break;case"finished":case"dead":!function(){p.objects.onLeft.collider&&(p.objects.onLeft.collider.destroy(),p.objects.onLeft.collider=void 0);p.objects.onRight.collider&&(p.objects.onRight.collider.destroy(),p.objects.onRight.collider=void 0);p.objects.onLeft.group.clear(!0,!0),p.objects.onRight.group.clear(!0,!0),p.tree.image.setX(d.values.treeOffset),p.tree.homeCollider.active=!1,p.tree.trunkCollider.active=!1,p.tree.image.visible=!0,p.eggs.setVisible(!1),p.nest.setVisible(!1),Object.assign(p,f()),x(0),c.Player.restart(),b(),m()}()}e&&(c.Player.flap(),++p.stats.numFlaps)}function w(){return p.stats.numFlaps<1?0:Math.max(0,Math.trunc(p.stats.distanceTravelled-8*(p.stats.numFlaps-1)+10*p.stats.numSlides))}function x(e){p.stats.distanceTravelled+=.1*e,p.header.score.text.setText("".concat(p.header.score.prefix).concat(w()))}function _(e){64===p.reversals&&"finished"!==p.gameState&&(p.eggs.setVisible(!1),p.nest.setVisible(!0));var t=w();u.Settings.setLeader({reversals:p.reversals,score:t});var r=u.Settings.getValue("highScore"),a={state:"gameOver",completed:k()},n=!1;t>r&&(a.state="highScore",r=t,u.Settings.setValue({key:"highScore",value:r}),p.header.best.text.setText("".concat(p.header.best.prefix).concat(r)),n=!0),c.SoundEffects.stop("bgMusic"),"finished"===p.gameState&&(a.state="atHome",n=!1,c.SoundEffects.play("finished")),n&&c.SoundEffects.play("congrats"),e.scene.launch(d.scenes.title,a),h({scene:e,isOn:!1})}function k(){if("finished"===p.gameState)return 100;var e=p.reversals/65,t=(p.reversals%2==0?p.player.x:d.app.size.x-p.player.x)/(65*d.app.size.x);return Math.min(99,100*(e+t))}function j(){"flying"===p.gameState&&c.Player.makeBirdFall("object")}function N(e){for(var t=e.type,r=e.updateLeftSide,a=e.scene,n=e.isStacked,o=e.numObjects,i=0,s=r?p.objects.onLeft.group:p.objects.onRight.group,c=0,u=0,d=0;i<o&&c<100;)n?0===i?(u=l.default.Math.Between(0,p.occupied.max.x-("big"===t?3:1)),d=l.default.Math.Between(0,p.occupied.max.y-3)):++d:(u=l.default.Math.Between(0,p.occupied.max.x-("big"===t?3:1)),d=l.default.Math.Between(0,p.occupied.max.y-1)),C({x:u,y:d,type:t})?(P({x:u,y:d,type:t,isStacked:n}),s.add(E({x:u,y:d,type:t,scene:a,updateLeftSide:r})),++i):++c}function C(e){var t=e.x,r=e.y;return"big"===e.type?!p.occupied.grid[t][r]&&!p.occupied.grid[t+1][r]&&!p.occupied.grid[t+2][r]:!p.occupied.grid[t][r]}function P(e){for(var t=e.x+("big"===e.type?2:0),r=e.x;r<=t;++r)K({x:r,y:e.y}),e.isStacked||(K({x:r,y:e.y-1}),K({x:r,y:e.y+1}))}function K(e){var t=e.x,r=e.y;t>=0&&t<p.occupied.max.x&&r>=0&&r<p.occupied.max.y&&(p.occupied.grid[t][r]=!0)}function E(e){var t;switch(e.type){case"big":t=d.assetKey.png.metalBig;break;case"small":t=d.assetKey.png.metalSmall;break;case"box":t=0===l.default.Math.Between(0,1)?d.assetKey.png.metalBox1:d.assetKey.png.metalBox2}var r=e.updateLeftSide?120:d.app.size.x-330;return e.scene.physics.add.sprite(r+52*e.x,100+56*e.y,t).setScale(.5).setOrigin(0,.5).setPushable(!1).setDepth(p.depth.walls)}t.GameScreen=y,t.onAction=O},471:function(e,t,r){var a,n=this&&this.__extends||(a=function(e,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},a(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),o=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],a=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&a>=e.length&&(e=void 0),{value:e&&e[a++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.PreLoader=void 0;var s=i(r(260)),l=r(20),c=r(627),u=l.Constants.get(),d=function(e){function t(){return e.call(this,"PreLoader-".concat(u.app.title))||this}return n(t,e),t.prototype.preload=function(){!function(e){var t,r,a,n;try{for(var i=o(Object.keys(u.assetKey.png)),s=i.next();!s.done;s=i.next()){var d=s.value;l.Common.loadPng({scene:e,pngId:d})}}catch(e){t={error:e}}finally{try{s&&!s.done&&(r=i.return)&&r.call(i)}finally{if(t)throw t.error}}try{for(var f=o(Object.keys(u.assetKey.audio)),p=f.next();!p.done;p=f.next()){var y=p.value;l.Common.loadAudio({scene:e,audioId:y})}}catch(e){a={error:e}}finally{try{p&&!p.done&&(n=f.return)&&n.call(f)}finally{if(a)throw a.error}}l.Sprites.preload(e),l.Common.setGameSize({scene:e,autoScale:c.Settings.get("autoScale")})}(this)},t.prototype.create=function(){var e;e=this,l.Sprites.create(e),l.SoundEffects.create(e),e.scene.start(u.scenes.gameScreen)},t}(s.default.Scene);t.PreLoader=d},554:function(e,t,r){var a,n=this&&this.__extends||(a=function(e,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},a(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),o=this&&this.__assign||function(){return o=Object.assign||function(e){for(var t,r=1,a=arguments.length;r<a;r++)for(var n in t=arguments[r])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e},o.apply(this,arguments)},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.SettingsScreen=void 0;var s=i(r(260)),l=r(20),c=r(627),u=l.Constants.get(),d={layer:void 0,navObjects:new Map,off:{fullScreen:void 0,sounds:void 0},playerName:{inputCursor:void 0,inputText:void 0,maxLength:5,nameInputInfo:void 0,newName:"",validKeys:"abcdefghijklmnopqrstuvwxyz0123456789.-_!$&+-/*=^%"},sceneId:"settings",settingsEl:void 0},f=function(e){function t(){return e.call(this,u.scenes.settings)||this}return n(t,e),t.prototype.preload=function(){var e;e=this,l.Common.loadHtml({scene:e,htmlId:"settings"})},t.prototype.create=function(){var e;e=this,d.layer=e.add.layer(),d.layer.setAlpha(0),function(e){var t=l.UiBuilder.createSignBackground(e);d.layer.add(t);var r=u.values.ui.screenCenterX,a=u.values.ui.signBackgroundY;t=e.add.image(r,a,u.assetKey.png["ui/banner"]).setOrigin(.5),d.layer.add(t),a-=25,t=e.add.image(r,a,u.assetKey.png["ui/settings"]).setOrigin(.5),d.layer.add(t),a+=45;var n=e.add.text(r,a,"v".concat(u.app.version),u.textStyles.normal).setOrigin(.5,0);d.layer.add(n),r=440,a=240,t=e.add.image(r,a,u.assetKey.png["ui/messageFullScreen"]).setOrigin(0,.5),d.layer.add(t),a=340,t=e.add.image(r,a,u.assetKey.png["ui/messageSounds"]).setOrigin(0,.5),d.layer.add(t);var i=.7;r=380,a=240,t=e.add.image(r,a,u.assetKey.png["ui/buttonFullScreen"]).setScale(i).setOrigin(.5),d.navObjects.set("fullScreen",l.UiBuilder.makeButton({image:t,onPress:function(){return y(e)},onHover:function(t){return v({scene:e,button:"fullScreen",isOver:t})}})),d.layer.add(t),d.off.fullScreen=e.add.image(r,a,u.assetKey.png["ui/off"]).setScale(i).setVisible(e.game.scale.scaleMode===s.default.Scale.NONE).setOrigin(.5),d.layer.add(d.off.fullScreen),a=340,t=e.add.image(r,a,u.assetKey.png["ui/buttonSounds"]).setScale(i).setOrigin(.5),d.navObjects.set("sound",l.UiBuilder.makeButton({image:t,onPress:function(){return g()},onHover:function(t){return v({scene:e,button:"sound",isOver:t})}})),d.layer.add(t),d.off.sounds=e.add.image(r,a,u.assetKey.png["ui/off"]).setScale(i).setVisible(!c.Settings.get("enableSounds")).setOrigin(.5),d.layer.add(d.off.sounds),function(e){d.playerName.newName=c.Settings.getString("playerName");var t=u.values.ui.screenCenterX,r=450,a=e.add.image(t,r,u.assetKey.png["ui/playerName"]).setOrigin(.5);d.navObjects.set("name",l.UiBuilder.makeButton({image:a,onPress:function(){return h({allow:!0,scene:e})},onHover:function(e){return l.KeyboardNavigator.highlightButton({sceneId:d.sceneId,isOver:e,button:"name",navObjects:d.navObjects})}})),d.layer.add(a),t=560,d.playerName.inputText=e.add.text(t,r,d.playerName.newName,o(o({},u.textStyles.playerName),{fontSize:"45px"})).setOrigin(.5),d.layer.add(d.playerName.inputText),d.playerName.inputCursor=e.add.text(m(),r-5,"|",o(o({},d.playerName.inputText.style),{stroke:"#fff"})).setScale(.5,1).setVisible(!1).setOrigin(.5),d.layer.add(d.playerName.inputCursor),r+=65,d.playerName.nameInputInfo=e.add.text(t,r,"",u.textStyles.normal).setVisible(!1).setOrigin(.5),d.layer.add(d.playerName.nameInputInfo),e.tweens.add({targets:d.playerName.inputCursor,alpha:0,duration:500,loop:-1,yoyo:!0,ease:"Sine.easeIn"}),function(e){if(!e.sys.game.device.os.desktop){d.settingsEl=e.add.dom(0,0).createFromCache(u.assetKey.html.settings);var t=function(e){var t=d.settingsEl.getChildByID(e);if(t instanceof HTMLElement)return t;throw new ReferenceError("could not find element with id=".concat(e))}("keyInput");if(!(t instanceof HTMLInputElement))throw new ReferenceError("keyInput is not an HTMLInputElement");t.value=d.playerName.newName,d.mobileSupport={keyInputEl:t,scene:e}}}(e)}(e),r=u.values.ui.buttonOffsetX,a=u.values.ui.navButtonY,t=e.add.image(r,a,u.assetKey.png["ui/buttonHome"]).setOrigin(.5),d.navObjects.set("home",l.UiBuilder.makeButton({image:t,onPress:function(){return p(e)},onHover:function(t){return v({scene:e,button:"home",isOver:t})}})),d.layer.add(t),r=u.app.size.x-170,a-=12,n=e.add.text(r,a,"(c) 2022 Marek A. Krzeminski. All Rights Reserved",u.textStyles.copyright).setOrigin(1),d.layer.add(n)}(e),l.KeyboardNavigator.create(e),l.KeyboardNavigator.resetCurrentState("settings"),e.tweens.add({targets:d.layer,alpha:1,duration:u.values.ui.fadeDuration})},t.prototype.update=function(e,t){!function(e){if(l.KeyboardNavigator.updateButtonStates({sceneId:d.sceneId,navObjects:d.navObjects})){return void("name"!==l.KeyboardNavigator.getCurrentState(d.sceneId)&&h({allow:!1,scene:e}))}switch(l.KeyboardNavigator.getActivatedButton(d.sceneId)){case"fullScreen":y(e);break;case"sound":g();break;case"home":p(e);break;case"name":h({allow:!0,scene:e})}}(this)},t}(s.default.Scene);function p(e){if(c.Settings.getString("playerName")!==d.playerName.newName){var t=d.playerName.newName;0===t.length&&(t=c.Settings.generateRandomName()),c.Settings.setString({key:"playerName",str:t}),c.Settings.setValue({key:"highScore",value:0}),e.scene.get(u.scenes.gameScreen).clearHighScore()}e.scene.stop(),d.layer.destroy();e.scene.launch(u.scenes.title,{state:"start",completed:0})}function y(e){e.game.scale.scaleMode===s.default.Scale.FIT?(e.game.scale.scaleMode=s.default.Scale.NONE,e.game.scale.setZoom(1),d.off.fullScreen.setVisible(!0),c.Settings.set({key:"autoScale",value:!1})):(e.game.scale.scaleMode=s.default.Scale.FIT,d.off.fullScreen.setVisible(!1),c.Settings.set({key:"autoScale",value:!0})),e.game.scale.refresh()}function g(){var e=!c.Settings.get("enableSounds");c.Settings.set({key:"enableSounds",value:e}),l.SoundEffects.enable(e),d.off.sounds.setVisible(!e)}function v(e){var t=e.scene,r=e.button,a=e.isOver;"name"!==r&&h({allow:!1,scene:t}),l.KeyboardNavigator.highlightButton({sceneId:d.sceneId,isOver:a,button:r,navObjects:d.navObjects})}function h(e){var t=e.allow,r=e.scene;d.playerName.inputCursor.setVisible(t),d.playerName.nameInputInfo.setVisible(t),t?(r.input.keyboard.on("keyup",(function(e){return S({key:e.key,scene:r})})),d.mobileSupport&&(d.mobileSupport.keyInputEl.focus(),d.mobileSupport.keyInputEl.addEventListener("input",b))):(r.input.keyboard.off("keyup"),d.mobileSupport&&(d.mobileSupport.keyInputEl.removeEventListener("input",b),d.mobileSupport.keyInputEl.blur()))}function b(){if(void 0!==d.mobileSupport){var e=d.mobileSupport.keyInputEl.value;if(e.length>d.playerName.newName.length)S({key:e.charAt(d.playerName.newName.length),scene:d.mobileSupport.scene});else e.length<d.playerName.newName.length&&S({key:"Backspace",scene:d.mobileSupport.scene});d.mobileSupport.keyInputEl.value=d.playerName.newName}else console.error("_.mobileSupport === undefined")}function m(){return d.playerName.inputText.x+.5*d.playerName.inputText.width+3}function S(e){var t=e.key,r=e.scene;if(function(e){if("Backspace"===e||"Enter"===e)return!0;if(1!==e.length)return!1;var t=e.toLocaleLowerCase();return d.playerName.validKeys.includes(t)}(t)){if("Enter"===t)return h({allow:!1,scene:r}),void l.KeyboardNavigator.resetCurrentState("settings");var a;"Backspace"===t?d.playerName.newName.length>0&&(d.playerName.newName=d.playerName.newName.slice(0,Math.max(0,d.playerName.newName.length-1))):d.playerName.newName.length<d.playerName.maxLength&&(d.playerName.newName+=t),d.playerName.inputText.setText(d.playerName.newName),d.playerName.inputCursor.setX(m()),a="",d.playerName.newName.length===d.playerName.maxLength?a="Max ".concat(d.playerName.maxLength," characters"):0===d.playerName.newName.length&&(a="Invalid name"),d.playerName.nameInputInfo.setVisible(!0).setText(a)}}t.SettingsScreen=f},620:function(e,t,r){var a,n=this&&this.__extends||(a=function(e,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},a(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),o=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],a=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&a>=e.length&&(e=void 0),{value:e&&e[a++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.StatsScreen=void 0;var s=i(r(260)),l=r(20),c=r(627),u=l.Constants.get(),d={layer:void 0,navObjects:new Map,sceneId:"stats",statsEl:void 0,switch:void 0,tableEl:void 0},f=function(e){function t(){return e.call(this,u.scenes.stats)||this}return n(t,e),t.prototype.preload=function(){var e;e=this,l.Common.loadHtml({scene:e,htmlId:"stats"})},t.prototype.create=function(){var e;e=this,d.layer=e.add.layer(),d.layer.setAlpha(0),function(e){var t=l.UiBuilder.createSignBackground(e);d.layer.add(t),function(e){var t=u.values.ui.screenCenterX,r=u.values.ui.signBackgroundY+40,a=.75;d.switch=e.add.image(t,r,u.assetKey.png["ui/switch"]).setScale(a).setOrigin(.5),d.navObjects.set("switch",l.UiBuilder.makeButton({image:d.switch,onPress:function(){return p(e)},onHover:function(e){return l.KeyboardNavigator.highlightButton({sceneId:d.sceneId,isOver:e,button:"switch",navObjects:d.navObjects})}})),d.layer.add(d.switch);var n=12,o=e.add.image(t-n-.5*d.switch.width,r,u.assetKey.png["ui/local"]).setScale(a).setOrigin(.5);d.layer.add(o),o=e.add.image(t+n+.5*d.switch.width,r,u.assetKey.png["ui/global"]).setScale(a).setOrigin(.5),d.layer.add(o)}(e);var r=u.values.ui.screenCenterX,a=u.values.ui.signBackgroundY;t=e.add.image(r,a,u.assetKey.png["ui/banner"]).setOrigin(.5),d.layer.add(t),a-=27,t=e.add.image(r-2,a,u.assetKey.png["ui/leaders"]).setOrigin(.5),d.layer.add(t),a+=90,d.statsEl=e.add.dom(r,a).createFromCache(u.assetKey.html.stats).setOrigin(.5,0),d.layer.add(d.statsEl),r=355,a=103;var n=.17;t=e.add.image(r,a,u.assetKey.png["ui/stats"]).setScale(.5).setRotation(-n).setOrigin(.5),d.layer.add(t),r=668,t=e.add.image(r,a,u.assetKey.png["ui/stats"]).setScale(.5).setRotation(n).setOrigin(.5),d.layer.add(t),d.tableEl=function(e){var t=d.statsEl.getChildByID(e);if(t instanceof HTMLElement)return t;throw new ReferenceError("could not find element with id=".concat(e))}("statsTable"),y({isLocal:!0}),r=u.values.ui.buttonOffsetX,a=u.values.ui.navButtonY,t=e.add.image(r,a,u.assetKey.png["ui/buttonHome"]).setOrigin(.5),d.navObjects.set("home",l.UiBuilder.makeButton({image:t,onPress:function(){return v(e)},onHover:function(e){return l.KeyboardNavigator.highlightButton({sceneId:d.sceneId,isOver:e,button:"home",navObjects:d.navObjects})}})),d.layer.add(t)}(e),l.KeyboardNavigator.create(e),l.KeyboardNavigator.resetCurrentState("stats"),e.tweens.add({targets:d.layer,alpha:1,duration:u.values.ui.fadeDuration})},t.prototype.update=function(e,t){!function(e){if(l.KeyboardNavigator.updateButtonStates({sceneId:d.sceneId,navObjects:d.navObjects}))return;switch(l.KeyboardNavigator.getActivatedButton(d.sceneId)){case"home":v(e);break;case"switch":p(e)}}(this)},t}(s.default.Scene);function p(e){d.switch.setFlipX(!d.switch.flipX),y({isLocal:!1===d.switch.flipX})}function y(e){var t,r;d.tableEl.innerHTML="";var a=c.Settings.getLeaders(e);try{for(var n=o(a),i=n.next();!i.done;i=n.next()){g(i.value)}}catch(e){t={error:e}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(t)throw t.error}}}function g(e){var t=document.createElement("div");t.innerHTML="".concat(e.score),d.tableEl.append(t),(t=document.createElement("div")).innerHTML=e.playerName,d.tableEl.append(t),(t=document.createElement("div")).innerHTML="".concat(new Date(l.Common.getDateValue(e.date)).toLocaleDateString(void 0,{day:"numeric",month:"short",year:"numeric"})),d.tableEl.append(t)}function v(e){e.scene.stop(),d.layer.destroy();e.scene.launch(u.scenes.title,{state:"start",completed:0})}t.StatsScreen=f},2:function(e,t,r){var a,n=this&&this.__extends||(a=function(e,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},a(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),o=this&&this.__assign||function(){return o=Object.assign||function(e){for(var t,r=1,a=arguments.length;r<a;r++)for(var n in t=arguments[r])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e},o.apply(this,arguments)},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.TitleScreen=void 0;var s=i(r(260)),l=r(20),c=r(627),u=l.Constants.get(),d={data:void 0,layer:void 0,navObjects:new Map,sceneId:"title"},f=function(e){function t(){return e.call(this,u.scenes.title)||this}return n(t,e),t.prototype.init=function(e){var t;t={scene:this,data:e},d.data=t.data},t.prototype.create=function(){var e;e=this,d.layer=e.add.layer(),d.layer.setAlpha(0),function(e){var t=l.UiBuilder.createSignBackground(e);d.layer.add(t);var r,a,n=u.values.ui.screenCenterX,i=30;switch(t=e.add.image(n,i,u.assetKey.png["ui/logo"]).setOrigin(.485,0),d.layer.add(t),d.data.state){case"start":r=u.assetKey.png["ui/messagePress"],a=u.assetKey.png["ui/buttonPlay"];break;case"gameOver":r=u.assetKey.png["ui/messageGameOver"],a=u.assetKey.png["ui/buttonReplay"];break;case"atHome":case"highScore":r=u.assetKey.png["ui/messageHighScore"],a=u.assetKey.png["ui/buttonReplay"];var s=u.values.ui.buttonOffsetX;i=240,t=e.add.image(s,i,u.assetKey.png["ui/star"]).setOrigin(1,.5),d.layer.add(t),s=u.app.size.x-u.values.ui.buttonOffsetX,t=e.add.image(s,i,u.assetKey.png["ui/star"]).setOrigin(0,.5),d.layer.add(t)}var f=270;if(i=f,"atHome"!==d.data.state)t=e.add.image(n,i,r).setOrigin(.5,1),d.layer.add(t);else{var v=e.add.text(n,i,"".concat(c.Settings.getString("playerName")," Made It Home!"),o(o({},u.textStyles.playerName),{fontSize:"45px",strokeThickness:3})).setOrigin(.5,1);d.layer.add(v)}i=f+10,t=e.add.image(n,i,a).setOrigin(.5,0),d.navObjects.set("play",l.UiBuilder.makeButton({image:t,onPress:function(){return p(e)},onHover:function(e){return l.KeyboardNavigator.highlightButton({sceneId:d.sceneId,isOver:e,button:"play",navObjects:d.navObjects})}})),d.layer.add(t),"start"!==d.data.state&&function(e){var t=u.values.ui.screenCenterX,r=460,a=e.add.image(t,r,u.assetKey.png["ui/scoreBackground"]).setOrigin(.5);d.layer.add(a);var n=e.add.graphics();n.fillGradientStyle(5939645,5939645,3967429,3967429,1),d.layer.add(n);var o=e.add.text(t,r,"",u.textStyles.normal).setOrigin(.5);d.layer.add(o);var i=function(e){var t=2+337*e/100;n.fillRect(336,443,t,33),o.setText("".concat(Math.round(e),"% Complete"))};e.tweens.addCounter({from:0,to:d.data.completed,duration:1e3,onUpdate:function(e){return i(e.getValue())},onComplete:function(e){return i(e.getValue())}}),a=e.add.image(t,r,u.assetKey.png["ui/scoreForeground"]).setOrigin(.5),d.layer.add(a),t=302,r-=3,a=e.add.image(t,r,u.assetKey.png["ui/medal"]).setOrigin(.5),d.layer.add(a)}(e),i=570,t=e.add.image(n,i,u.assetKey.png["ui/messagePlayer"]).setOrigin(.5,1),d.layer.add(t),i=u.values.ui.navButtonY;var h=e.add.text(n,i-12,c.Settings.getString("playerName"),u.textStyles.playerName).setOrigin(.5,1);d.layer.add(h),n=u.values.ui.buttonOffsetX,t=e.add.image(n,i,u.assetKey.png["ui/buttonSettings"]).setOrigin(.5),d.navObjects.set("settings",l.UiBuilder.makeButton({image:t,onPress:function(){return y(e)},onHover:function(e){return l.KeyboardNavigator.highlightButton({sceneId:d.sceneId,isOver:e,button:"settings",navObjects:d.navObjects})}})),d.layer.add(t),n=u.app.size.x-u.values.ui.buttonOffsetX,t=e.add.image(n,i,u.assetKey.png["ui/buttonStats"]).setOrigin(.5),d.navObjects.set("stats",l.UiBuilder.makeButton({image:t,onPress:function(){return g(e)},onHover:function(e){return l.KeyboardNavigator.highlightButton({sceneId:d.sceneId,isOver:e,button:"stats",navObjects:d.navObjects})}})),d.layer.add(t)}(e),l.KeyboardNavigator.create(e),l.KeyboardNavigator.resetCurrentState("title"),e.tweens.add({targets:d.layer,alpha:1,duration:u.values.ui.fadeDuration})},t.prototype.update=function(e,t){!function(e){if(l.KeyboardNavigator.updateButtonStates({sceneId:d.sceneId,navObjects:d.navObjects}))return;switch(l.KeyboardNavigator.getActivatedButton(d.sceneId)){case"play":p(e);break;case"settings":y(e);break;case"stats":g(e)}}(this)},t}(s.default.Scene);function p(e){e.scene.stop(u.scenes.title),d.layer.destroy(),e.scene.get(u.scenes.gameScreen).startPlay()}function y(e){e.scene.stop(),e.scene.run(u.scenes.settings)}function g(e){e.scene.stop(),e.scene.run(u.scenes.stats)}t.TitleScreen=f},542:function(e,t,r){var a=this&&this.__createBinding||(Object.create?function(e,t,r,a){void 0===a&&(a=r),Object.defineProperty(e,a,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,a){void 0===a&&(a=r),e[a]=t[r]}),n=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||a(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),n(r(925),t),n(r(471),t),n(r(554),t),n(r(620),t),n(r(2),t)},903:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getDateString=t.leaderSorter=void 0,t.leaderSorter=function(e,t){return e.score>t.score?-1:e.score<t.score?1:e.date.localeCompare(t.date)},t.getDateString=function(e){var t=Date.now()-1e3*(e?e.numDaysAgo:0)*60*60*24,r=new Date(t),a="".concat(r.getUTCMonth()+1).padStart(2,"0"),n="".concat(r.getUTCDate()).padStart(2,"0");return"".concat(r.getUTCFullYear(),"_").concat(a,"_").concat(n)}},959:function(e,t,r){var a=this&&this.__assign||function(){return a=Object.assign||function(e){for(var t,r=1,a=arguments.length;r<a;r++)for(var n in t=arguments[r])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e},a.apply(this,arguments)},n=this&&this.__createBinding||(Object.create?function(e,t,r,a){void 0===a&&(a=r),Object.defineProperty(e,a,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,a){void 0===a&&(a=r),e[a]=t[r]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return o(t,e),t},s=this&&this.__awaiter||function(e,t,r,a){return new(r||(r=Promise))((function(n,o){function i(e){try{l(a.next(e))}catch(e){o(e)}}function s(e){try{l(a.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?n(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(i,s)}l((a=a.apply(e,t||[])).next())}))},l=this&&this.__generator||function(e,t){var r,a,n,o,i={label:0,sent:function(){if(1&n[0])throw n[1];return n[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;i;)try{if(r=1,a&&(n=2&o[0]?a.return:o[0]?a.throw||((n=a.return)&&n.call(a),0):a.next)&&!(n=n.call(a,o[1])).done)return n;switch(a=0,n&&(o=[2&o[0],n.value]),o[0]){case 0:case 1:n=o;break;case 4:return i.label++,{value:o[1],done:!1};case 5:i.label++,a=o[1],o=[0];continue;case 7:o=i.ops.pop(),i.trys.pop();continue;default:if(!(n=i.trys,(n=n.length>0&&n[n.length-1])||6!==o[0]&&2!==o[0])){i=0;continue}if(3===o[0]&&(!n||o[1]>n[0]&&o[1]<n[3])){i.label=o[1];break}if(6===o[0]&&i.label<n[1]){i.label=n[1],n=o;break}if(n&&i.label<n[2]){i.label=n[2],i.ops.push(o);break}n[2]&&i.ops.pop(),i.trys.pop();continue}o=t.call(e,i)}catch(e){o=[6,e],a=0}finally{r=n=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}},c=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],a=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&a>=e.length&&(e=void 0),{value:e&&e[a++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},u=this&&this.__read||function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var a,n,o=r.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(a=o.next()).done;)i.push(a.value)}catch(e){n={error:e}}finally{try{a&&!a.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}return i},d=this&&this.__spreadArray||function(e,t,r){if(r||2===arguments.length)for(var a,n=0,o=t.length;n<o;n++)!a&&n in t||(a||(a=Array.prototype.slice.call(t,0,n)),a[n]=t[n]);return e.concat(a||Array.prototype.slice.call(t))};Object.defineProperty(t,"__esModule",{value:!0}),t.getGlobalLeaderDetailsAsync=t.addScoreAsync=t.initialize=void 0;var f=r(503),p=r(591),y=r(20),g=i(r(903)),v=r(483),h=y.Constants.get(),b={app:void 0,db:void 0,scoresCollection:{path:"games/flipFlap/scores",ref:void 0},config:{apiKey:"AIzaSyBSWmTFoDO_Kn8KWHtf8bA5wwHsn8-eY_8",authDomain:"createstones.firebaseapp.com",projectId:"createstones",storageBucket:"createstones.appspot.com",messagingSenderId:"764273799552",appId:"1:764273799552:web:a84170b50232b95fac9165"}};function m(e){e instanceof f.FirebaseError||e instanceof Error?console.error(e.message):console.error(e)}t.initialize=function(){try{b.app=(0,f.initializeApp)(b.config),b.db=(0,p.getFirestore)(b.app),b.scoresCollection.ref=(0,p.collection)(b.db,b.scoresCollection.path)}catch(e){m(e)}},t.addScoreAsync=function(e){return s(this,void 0,void 0,(function(){return l(this,(function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),[4,(0,p.addDoc)(b.scoresCollection.ref,a(a({},e.player),e.userInfo))];case 1:return t.sent(),[3,3];case 2:return m(t.sent()),[3,3];case 3:return[2]}}))}))},t.getGlobalLeaderDetailsAsync=function(){var e;return s(this,void 0,void 0,(function(){var t,r,a,n,o,i,s,f,y,S,O,w,x;return l(this,(function(l){switch(l.label){case 0:t=[],l.label=1;case 1:l.trys.push([1,6,,7]),a=0,l.label=2;case 2:return a<=30?(n=g.getDateString({numDaysAgo:a}),o=(0,p.query)(b.scoresCollection.ref,(0,p.where)("date","==",n),(0,p.orderBy)("score","desc"),(0,p.limit)(h.values.maxNumLeaders)),[4,(0,p.getDocs)(o)]):[3,5];case 3:i=l.sent();try{for(w=void 0,s=c(i.docs),f=s.next();!f.done;f=s.next())y=f.value,(S=y.data()).playerName&&S.score&&S.date&&t.push({date:S.date,playerName:S.playerName,reversals:null!==(e=S.reversals)&&void 0!==e?e:0,score:S.score})}catch(e){w={error:e}}finally{try{f&&!f.done&&(x=s.return)&&x.call(s)}finally{if(w)throw w.error}}if(a<=1&&i.docs.length>0&&void 0!==(O=i.docs[i.docs.length-1].data()).score&&(void 0===r||O.score<r)&&(r=O.score),t.length>=h.values.maxNumLeaders)return[3,5];l.label=4;case 4:return++a,[3,2];case 5:return[3,7];case 6:return m(l.sent()),[3,7];case 7:return t.length<h.values.maxNumLeaders&&t.push.apply(t,d([],u((0,v.createDummyLeaders)()),!1)),t.sort(g.leaderSorter),t.splice(h.values.maxNumLeaders,t.length-h.values.maxNumLeaders),[2,{leaders:t,lowestScoreToday:null!=r?r:90}]}}))}))}},226:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.USER_INFO_DEFAULTS=void 0,t.USER_INFO_DEFAULTS=Object.freeze({city:"",country:"",ip:"",loc:"",region:""})},483:function(e,t,r){var a=this&&this.__assign||function(){return a=Object.assign||function(e){for(var t,r=1,a=arguments.length;r<a;r++)for(var n in t=arguments[r])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e},a.apply(this,arguments)},n=this&&this.__createBinding||(Object.create?function(e,t,r,a){void 0===a&&(a=r),Object.defineProperty(e,a,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,a){void 0===a&&(a=r),e[a]=t[r]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return o(t,e),t},s=this&&this.__awaiter||function(e,t,r,a){return new(r||(r=Promise))((function(n,o){function i(e){try{l(a.next(e))}catch(e){o(e)}}function s(e){try{l(a.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?n(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(i,s)}l((a=a.apply(e,t||[])).next())}))},l=this&&this.__generator||function(e,t){var r,a,n,o,i={label:0,sent:function(){if(1&n[0])throw n[1];return n[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;i;)try{if(r=1,a&&(n=2&o[0]?a.return:o[0]?a.throw||((n=a.return)&&n.call(a),0):a.next)&&!(n=n.call(a,o[1])).done)return n;switch(a=0,n&&(o=[2&o[0],n.value]),o[0]){case 0:case 1:n=o;break;case 4:return i.label++,{value:o[1],done:!1};case 5:i.label++,a=o[1],o=[0];continue;case 7:o=i.ops.pop(),i.trys.pop();continue;default:if(!(n=i.trys,(n=n.length>0&&n[n.length-1])||6!==o[0]&&2!==o[0])){i=0;continue}if(3===o[0]&&(!n||o[1]>n[0]&&o[1]<n[3])){i.label=o[1];break}if(6===o[0]&&i.label<n[1]){i.label=n[1],n=o;break}if(n&&i.label<n[2]){i.label=n[2],i.ops.push(o);break}n[2]&&i.ops.pop(),i.trys.pop();continue}o=t.call(e,i)}catch(e){o=[6,e],a=0}finally{r=n=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}},c=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],a=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&a>=e.length&&(e=void 0),{value:e&&e[a++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},u=this&&this.__read||function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var a,n,o=r.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(a=o.next()).done;)i.push(a.value)}catch(e){n={error:e}}finally{try{a&&!a.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}return i},d=this&&this.__spreadArray||function(e,t,r){if(r||2===arguments.length)for(var a,n=0,o=t.length;n<o;n++)!a&&n in t||(a||(a=Array.prototype.slice.call(t,0,n)),a[n]=t[n]);return e.concat(a||Array.prototype.slice.call(t))};Object.defineProperty(t,"__esModule",{value:!0}),t.setLeader=t.getLeaders=t.createDummyLeaders=t.generateRandomName=t.setString=t.getString=t.setValue=t.getValue=t.set=t.get=t.initializeAsync=void 0;var f=r(20),p=i(r(903)),y=i(r(959)),g=i(r(226)),v=f.Constants.get(),h=Object.freeze({autoScale:!0,enableSounds:!0}),b=Object.freeze({highScore:0}),m=Object.freeze({playerName:w()}),S={bool:a({},h),leaderBoard:{global:[],globalLowestScore:0,local:[]},num:a({},b),str:a({},m),userInfo:a({},g.USER_INFO_DEFAULTS)};function O(){var e=JSON.stringify(S);localStorage.setItem("".concat(v.app.title,":").concat(v.storage.settings),e)}function w(){var e=Math.floor(9999*Math.random()),t="".concat(e).padStart(4,"0");return"p".concat(t)}function x(){for(var e=[],t=v.values.maxNumLeaders;t>=1;--t)e.push({date:p.getDateString(),playerName:t%2==0?"Flip":"Flap",reversals:0,score:80+10*t});return e}function _(e){return s(this,void 0,void 0,(function(){var t;return l(this,(function(r){switch(r.label){case 0:return S.leaderBoard.local=void 0!==e&&e.local.length>0&&"string"==typeof e.local[0].date?e.local:x(),[4,y.getGlobalLeaderDetailsAsync()];case 1:return t=r.sent(),S.leaderBoard.global=t.leaders,S.leaderBoard.globalLowestScore=t.lowestScoreToday,[2]}}))}))}function k(e){var t=e.player,r=e.leaders;return!(t.score<r[r.length-1].score)&&(r.push(t),r.sort(p.leaderSorter),r.length>v.values.maxNumLeaders&&r.splice(v.values.maxNumLeaders,r.length-v.values.maxNumLeaders),!0)}t.initializeAsync=function(){return s(this,void 0,void 0,(function(){var e,t,r,a,n,o,i,s,u,d,f,p,y,h,b,m,w,x,k,j,N,C,P,K,E,I;return l(this,(function(l){switch(l.label){case 0:e={};try{(p=localStorage.getItem("".concat(v.app.title,":").concat(v.storage.settings)))&&(e=JSON.parse(p))}catch(e){console.error(e)}t=!1;try{for(r=c(Object.keys(S.bool)),a=r.next();!a.done;a=r.next())b=a.value,n=e.bool,t||void 0!==n&&void 0!==n[b]||(t=!0),n&&void 0!==n[b]&&(S.bool[b]=n[b])}catch(e){k={error:e}}finally{try{a&&!a.done&&(j=r.return)&&j.call(r)}finally{if(k)throw k.error}}try{for(o=c(Object.keys(S.num)),i=o.next();!i.done;i=o.next())b=i.value,s=e.num,t||void 0!==s&&void 0!==s[b]||(t=!0),s&&void 0!==s[b]&&(S.num[b]=s[b])}catch(e){N={error:e}}finally{try{i&&!i.done&&(C=o.return)&&C.call(o)}finally{if(N)throw N.error}}try{for(u=c(Object.keys(S.str)),d=u.next();!d.done;d=u.next())b=d.value,f=e.str,t||void 0!==f&&void 0!==f[b]||(t=!0),f&&void 0!==f[b]&&(S.str[b]=f[b])}catch(e){P={error:e}}finally{try{d&&!d.done&&(K=u.return)&&K.call(u)}finally{if(P)throw P.error}}l.label=1;case 1:return l.trys.push([1,4,,5]),[4,fetch("https://ipinfo.io/json?token=c715c0269f0871")];case 2:return[4,l.sent().json()];case 3:p=l.sent();try{for(y=c(Object.keys(g.USER_INFO_DEFAULTS)),h=y.next();!h.done;h=y.next())b=h.value,(m=p[b])?S.userInfo[b]=m:console.error("missing ".concat(b))}catch(e){E={error:e}}finally{try{h&&!h.done&&(I=y.return)&&I.call(y)}finally{if(E)throw E.error}}return[3,5];case 4:return w=l.sent(),console.error(w),[3,5];case 5:return x=e.leaderBoard,t||void 0!==x||(t=!0),[4,_(x)];case 6:return l.sent(),t&&O(),[2]}}))}))},t.get=function(e){return S.bool[e]},t.set=function(e){S.bool[e.key]=e.value,O()},t.getValue=function(e){return S.num[e]},t.setValue=function(e){S.num[e.key]=e.value,O()},t.getString=function(e){return S.str[e]},t.setString=function(e){S.str[e.key]=e.str,O()},t.generateRandomName=w,t.createDummyLeaders=x,t.getLeaders=function(e){var t=e.isLocal?S.leaderBoard.local:S.leaderBoard.global;return d([],u(t),!1)},t.setLeader=function(e){var t=e.reversals,r=e.score,a={date:p.getDateString(),playerName:S.str.playerName,reversals:t,score:r},n=k({player:a,leaders:S.leaderBoard.local});(function(e){if(e.score<S.leaderBoard.globalLowestScore)return!1;return y.addScoreAsync({player:e,userInfo:S.userInfo}),k({player:e,leaders:S.leaderBoard.global})})(a)&&(n=!0),n&&O()}},627:function(e,t,r){var a=this&&this.__createBinding||(Object.create?function(e,t,r,a){void 0===a&&(a=r),Object.defineProperty(e,a,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,a){void 0===a&&(a=r),e[a]=t[r]}),n=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&a(t,e,r);return n(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.Settings=t.Interfaces=t.Firebase=t.Common=void 0,t.Common=o(r(903)),t.Firebase=o(r(959)),t.Interfaces=o(r(226)),t.Settings=o(r(483))}},r={};function a(e){var n=r[e];if(void 0!==n)return n.exports;var o=r[e]={id:e,exports:{}};return t[e].call(o.exports,o,o.exports,a),o.exports}a.m=t,e=[],a.O=(t,r,n,o)=>{if(!r){var i=1/0;for(u=0;u<e.length;u++){for(var[r,n,o]=e[u],s=!0,l=0;l<r.length;l++)(!1&o||i>=o)&&Object.keys(a.O).every((e=>a.O[e](r[l])))?r.splice(l--,1):(s=!1,o<i&&(i=o));if(s){e.splice(u--,1);var c=n();void 0!==c&&(t=c)}}return t}o=o||0;for(var u=e.length;u>0&&e[u-1][2]>o;u--)e[u]=e[u-1];e[u]=[r,n,o]},a.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return a.d(t,{a:t}),t},a.d=(e,t)=>{for(var r in t)a.o(t,r)&&!a.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},a.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),a.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),a.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{var e;a.g.importScripts&&(e=a.g.location+"");var t=a.g.document;if(!e&&t&&(t.currentScript&&(e=t.currentScript.src),!e)){var r=t.getElementsByTagName("script");r.length&&(e=r[r.length-1].src)}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),a.p=e})(),(()=>{a.b=document.baseURI||self.location.href;var e={143:0};a.O.j=t=>0===e[t];var t=(t,r)=>{var n,o,[i,s,l]=r,c=0;if(i.some((t=>0!==e[t]))){for(n in s)a.o(s,n)&&(a.m[n]=s[n]);if(l)var u=l(a)}for(t&&t(r);c<i.length;c++)o=i[c],a.o(e,o)&&e[o]&&e[o][0](),e[i[c]]=0;return a.O(u)},r=self.webpackChunkflip_flap=self.webpackChunkflip_flap||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))})();var n=a.O(void 0,[736],(()=>a(592)));n=a.O(n)})();